<!DOCTYPE html>
<!-- saved from url=(0216)file:///C:/Users/26511/Desktop/HUANHUAN1/%E5%BB%BA%E7%AD%91%E5%9B%BA%E5%BA%9F%E5%86%8D%E7%94%9F%E7%9B%B8%E5%8F%98%E6%B7%B7%E5%87%9D%E5%9C%9F%E9%85%8D%E5%90%88%E6%AF%94%E8%AE%BE%E8%AE%A1%E7%B3%BB%E7%BB%9F%20V1.02.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>建筑固废再生混凝土配比设计系统</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <!-- 备用图标字体 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #2c7873;
            --secondary-color: #6fb98f;
            --accent-color: #ff9a3c;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f5f7fa;
        }
        
        /* 确保图标正常显示 */
        .fas, .fa, .bi {
            display: inline-block;
            font-style: normal;
            font-variant: normal;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 图标加载失败时的备用方案 - 只在特定情况下使用 */
        .icon-fallback.fas::before, .icon-fallback.fa::before {
            content: attr(data-icon);
        }
        
        /* 确保图标字体加载 - 使用CDN */
        @font-face {
            font-family: 'FontAwesome';
            src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2') format('woff2'),
                 url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.ttf') format('truetype');
            font-weight: 900;
            font-style: normal;
        }
        
        /* 备用图标样式 */
        .icon-fallback {
            display: inline-block;
            width: 1em;
            height: 1em;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        /* 确保图标在所有浏览器中显示 */
        .fas, .fa {
            font-family: 'FontAwesome';
            font-weight: 900;
            font-style: normal;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        

        
        /* 确保图标容器有最小宽度 */
        .fas, .fa, .bi {
            min-width: 1em;
        }
        
        .login-container {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 0;
        }
        
        .login-card {
            background-color: rgba(255, 255, 255, 0.92);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            padding: 30px;
        }
        
        .system-logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .system-logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .system-logo p {
            font-size: 1rem;
            color: var(--dark-color);
            opacity: 0.8;
        }
        
        .main-container {
            display: flex;
            min-height: 100vh;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        
        .sidebar {
            width: 260px;
            background: linear-gradient(to bottom, var(--primary-color), #1f5c58);
            color: white;
            padding: 20px 0;
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            min-height: 100vh;
            height: 100%;
            overflow-y: auto;
            position: sticky;
            top: 0;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-menu {
            padding: 15px 0;
        }
        
        .menu-item {
            padding: 12px 25px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
            cursor: pointer;
            border-left: 4px solid transparent;
        }
        
        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--accent-color);
        }
        
        .menu-item i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            min-height: 0;
            width: 100%;
            max-width: 100%;
            margin: 0;
            box-sizing: border-box;
        }
        
        /* 确保所有页面的滚动行为一致 */
        .page-container {
            overflow-y: auto;
            overflow-x: hidden;
            height: 100%;
        }
        
        .page-container.active {
            display: block;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        

        

        

        
        /* 页面标题已删除，保留此注释作为历史记录 */
        
        /* 页面内容标题间距优化 - 页面标题已删除 */
        .page-container .section-title:first-child {
            margin-top: 0;
            margin-bottom: 25px;
        }
        
        /* 确保页面内容标题更突出 - 与实验验证页面保持一致 */
        .page-container .section-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            display: flex;
            align-items: center;
            position: relative;
        }
        
        /* 为素材库页面特别优化 - 页面标题已删除，调整间距 */
        #materials-library .section-title:first-child {
            margin-top: 0;
        }
        

        
        /* 确保所有页面的alert信息框样式一致 */
        .page-container .alert.alert-info {
            margin-bottom: 30px;
            margin-top: 10px;
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .card-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .card-content p {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
            color: var(--primary-color);
        }
        
        /* 移除重复的section-title样式，使用上面重新定义的样式 */
        
        .section-title i {
            margin-right: 10px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .data-table {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e0e6ed;
        }
        
        .btn-primary-custom {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s;
            color: white;
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(44, 120, 115, 0.3);
            color: white;
        }
        
        .form-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-top: 20px;
        }
        
        .form-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .form-title i {
            margin-right: 10px;
        }
        
        .form-group label {
            font-weight: 500;
            color: var(--dark-color);
            margin-bottom: 8px;
        }
        
        .form-control:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(111, 185, 143, 0.25);
        }
        
        .required:after {
            content: " *";
            color: #e74c3c;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        .page-container {
            display: none;
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
            /* height: 100%; */
        }
        
        .page-container.active {
            display: block;
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
            /* height: 100%; */
        }
        
        /* 确保素材库表单默认隐藏 */
        #material-library-form-container {
            display: none !important;
        }
        
        /* 素材库页面样式优化 */
        #materials-library {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        #materials-library .page-container {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        #materials-library .page-container.active {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding-bottom: 20px;
        }
        
        #materials-library .form-container {
            margin-bottom: 30px;
            scroll-margin-top: 20px;
        }
        
        #materials-library .data-table {
            margin-bottom: 20px;
        }
        
        #materials-library .form-container[style*="display: block"] {
            animation: fadeInUp 0.3s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 确保页面内容填充整个视口 */
        #main-system {
            width: 100%;
            height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        /* 确保页面容器没有额外的间距 */
        
        /* 确保滚动条不影响布局 */
        * {
            box-sizing: border-box;
        }
        
        /* 处理可能的滚动条问题 */
        html {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) transparent;
        }
        
        /* Webkit浏览器的滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }
        
        /* 确保整个应用填充视口 */
        #login-page,
        #main-system {
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        /* 确保内容区域能够正确滚动 */
        .main-content {
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .quick-access {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .quick-item {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .quick-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .quick-item i {
            font-size: 32px;
            margin-bottom: 15px;
            display: block;
        }
        
        .quick-item h5 {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            color: var(--secondary-color);
            opacity: 0.8;
        }
        
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }
        
        .toast {
            background: white;
            border-left: 4px solid var(--secondary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .toast-success {
            border-left-color: var(--secondary-color);
        }
        
        .toast-error {
            border-left-color: #e74c3c;
        }
        
        .calculation-result {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            border-radius: 0 4px 4px 0;
            margin-top: 20px;
        }
        
        .calculation-result h5 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .step-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }
        
        .step-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .step-title i {
            margin-right: 8px;
        }
        
        .input-group-custom {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .input-group-custom label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        .input-group-custom input {
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 8px 12px;
            width: 100%;
        }
        
        .input-group-custom input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(111, 185, 143, 0.25);
            outline: none;
        }
        
        .calculation-step {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent-color);
        }
        
        .calculation-step h6 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .final-result {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .final-result h4 {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .final-result .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .final-result .result-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .final-result .result-item span:first-child {
            display: block;
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .final-result .result-item span:last-child {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        /* 数据库页面表格样式 */
        #database .table {
            font-size: 0.9rem;
        }
        
        #database .table th {
            background-color: var(--primary-color) !important;
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #dee2e6;
        }
        
        #database .table td {
            text-align: center;
            vertical-align: middle;
            border: 1px solid #dee2e6;
            padding: 8px 4px;
        }
        
        #database .table tbody tr:nth-child(even) {
            background-color: rgba(111, 185, 143, 0.05);
        }
        
        #database .table tbody tr:hover {
            background-color: rgba(44, 120, 115, 0.1);
        }
        
        #database .form-container {
            margin-bottom: 30px;
        }
        
        #database .form-title {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            margin-bottom: 0;
        }
        
        #database .form-title i {
            margin-right: 10px;
        }
        
        #database .table-responsive {
            border: 1px solid #dee2e6;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
        }
        
        /* 配合比计算页面样式 */
        .calculation-tabs {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .tab-buttons {
            display: flex;
            border-bottom: 1px solid #e0e6ed;
        }
        
        .tab-btn {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab-btn:hover {
            background-color: rgba(44, 120, 115, 0.05);
            color: var(--primary-color);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-bottom-color: var(--accent-color);
        }
        
        .tab-content {
            display: none;
            padding: 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 标签页内容容器样式 */
        .tab-content-container {
            width: 100%;
        }
        
        /* 确保标签页内容正确显示 */
        .tab-content .section-title {
            margin-top: 0;
        }
        
        /* 再生粗骨料计算内容样式 */
        #recycled-calculation-content .calculation-step {
            margin-bottom: 20px;
        }
        
        #recycled-calculation-content .calculation-step h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        #recycled-calculation-content .calculation-step ul {
            margin-bottom: 0;
            padding-left: 20px;
        }
        
        #recycled-calculation-content .calculation-step li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        /* 再生混凝土模块独立样式 */
        .recycled-input-group-custom {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .recycled-input-group-custom label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        .recycled-input-group-custom input {
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 8px 12px;
            width: 100%;
        }
        
        .recycled-input-group-custom input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(111, 185, 143, 0.25);
            outline: none;
        }
        
        .recycled-calculation-step {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent-color);
        }
        
        .recycled-calculation-step h6 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .recycled-final-result {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .recycled-final-result h4 {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .recycled-final-result .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .recycled-final-result .result-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .recycled-final-result .result-item span:first-child {
            display: block;
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .recycled-final-result .result-item span:last-child {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        /* 设计条件列表样式 */
        .design-conditions {
            list-style: none;
            padding-left: 0;
        }
        
        .design-conditions li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            line-height: 1.6;
        }
        
        .design-conditions li:last-child {
            border-bottom: none;
        }
        
        .design-conditions strong {
            color: var(--primary-color);
        }
        
        .calculation-step {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent-color);
        }
        
        .calculation-step h6 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .calculation-step ul {
            margin-bottom: 0;
        }
        
        .calculation-step li {
            margin-bottom: 5px;
        }
        
        .design-conditions {
            list-style: none;
            padding-left: 0;
        }
        
        .design-conditions li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .design-conditions li:last-child {
            border-bottom: none;
        }
        
        .design-conditions ul {
            margin-top: 10px;
            margin-bottom: 0;
            padding-left: 20px;
        }
        
        .content-body {
            padding: 20px;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .tab-buttons {
                flex-direction: column;
            }
            
            .tab-btn {
                text-align: center;
                padding: 15px;
                font-size: 1rem;
            }
        }

        /* 素材库页面样式优化 */
        #materials-library {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        #materials-library .page-container {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        #materials-library .page-container.active {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding-bottom: 20px;
        }
        
        #materials-library .form-container {
            margin-bottom: 30px;
            scroll-margin-top: 20px;
        }
        
        #materials-library .data-table {
            margin-bottom: 20px;
        }
        
        #materials-library .form-container[style*="display: block"] {
            animation: fadeInUp 0.3s ease-out;
        }
        
        /* 修复素材库和数据库页面内容靠右的问题 */
        #materials-library,
        #database {
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        #materials-library .page-container,
        #database .page-container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        #materials-library .data-table,
        #database .form-container {
            width: 100%;
            max-width: 100%;
            margin-left: 0;
            margin-right: 0;
        }
        
        #materials-library .table-responsive,
        #database .table-responsive {
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        #materials-library .table,
        #database .table {
            width: 100%;
            max-width: 100%;
            margin: 0;
        }
        
        /* 确保表格内容充分利用空间 */
        #materials-library .table th,
        #materials-library .table td,
        #database .table th,
        #database .table td {
            padding: 12px 8px;
            text-align: center;
            vertical-align: middle;
        }
        
        /* 数据库页面表格样式 */
        #database .table {
            font-size: 0.9rem;
            width: 100%;
            max-width: 100%;
        }
        
        #database .table th {
            background-color: var(--primary-color) !important;
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #dee2e6;
            padding: 12px 8px;
        }
        
        #database .table td {
            text-align: center;
            vertical-align: middle;
            border: 1px solid #dee2e6;
            padding: 8px 4px;
        }
        
        #database .table tbody tr:nth-child(even) {
            background-color: rgba(111, 185, 143, 0.05);
        }
        
        #database .table tbody tr:hover {
            background-color: rgba(44, 120, 115, 0.1);
        }
        
        #database .form-container {
            margin-bottom: 30px;
            width: 100%;
            max-width: 100%;
        }
        
        #database .form-title {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            margin-bottom: 0;
            width: 100%;
        }
        
        #database .form-title i {
            margin-right: 10px;
        }
        
        #database .table-responsive {
            border: 1px solid #dee2e6;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
        }
        
        /* 确保所有表格和内容正确居中 */
        .table-responsive {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .table {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
        }
        
        /* 确保数据表格容器正确显示 */
        .data-table {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .data-table .table-responsive {
            width: 100% !important;
            max-width: 100% !important;
        }
        
        /* 确保表单容器正确显示 */
        .form-container {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 30px !important;
        }
        
        /* 确保页面标题和内容正确对齐 */
        .section-title {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 0 20px 0 !important;
            padding: 0 !important;
        }
        
        /* 确保警告框正确对齐 */
        .alert {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 0 20px 0 !important;
            padding: 15px 20px !important;
        }
        
        /* 确保表格头部正确对齐 */
        .table-header {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 20px !important;
        }
        
        /* 确保按钮组正确对齐 */
        .action-buttons {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* 强制修复布局问题 */
        #main-system {
            display: flex !important;
            width: 100% !important;
            height: 100vh !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: hidden !important;
        }
        
        .sidebar {
            flex-shrink: 0 !important;
            width: 260px !important;
        }
        
        .main-content {
            flex: 1 !important;
            width: calc(100% - 260px) !important;
            max-width: calc(100% - 260px) !important;
            margin: 0 !important;
            padding: 20px !important;
            box-sizing: border-box !important;
        }
        
        /* 强制修复页面容器 */
        .page-container.active {
            display: block !important;
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
        }
        
        /* 强制修复表格容器 */
        .data-table,
        .form-container {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
        }
        
        .data-table .table-responsive,
        .form-container .table-responsive {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* 直接修复素材库和数据库页面布局 */
        #materials-library.page-container.active,
        #database.page-container.active {
            display: block !important;
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
            position: relative !important;
            left: 0 !important;
            right: 0 !important;
        }
        
        /* 确保素材库和数据库页面的内容容器正确显示 */
        #materials-library .data-table,
        #database .form-container {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
            position: relative !important;
            left: 0 !important;
            right: 0 !important;
        }
        
        /* 确保表格正确显示 */
        #materials-library table,
        #database table {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            table-layout: fixed !important;
        }
        
        /* 确保表格单元格正确对齐 */
        #materials-library th,
        #materials-library td,
        #database th,
        #database td {
            text-align: center !important;
            vertical-align: middle !important;
            padding: 8px 4px !important;
            word-wrap: break-word !important;
        }
        
        /* 为素材库和数据库页面添加底部间距 */
        #materials-library,
        #database {
            padding-bottom: 40px !important;
        }
        
        #materials-library .page-container,
        #database .page-container {
            padding-bottom: 40px !important;
        }
        
        /* 确保最后一个表格容器有适当的底部间距 */
        #materials-library .form-container:last-child,
        #database .form-container:last-child {
            margin-bottom: 40px !important;
        }
        
        /* 底部间距容器样式 */
        .bottom-spacing {
            height: 60px !important;
            margin-bottom: 20px !important;
            clear: both !important;
        }
        
        /* C30报告下载按钮样式 */
        .btn-download-c30 {
            background-color: #4CAF50 !important;
            color: white !important;
            padding: 12px 24px !important;
            border-radius: 6px !important;
            border: none !important;
            font-size: 16px !important;
            cursor: pointer !important;
            transition: all 0.3s !important;
            font-weight: 500 !important;
            display: inline-block !important;
            margin: 0 auto !important;
            box-shadow: 0 2px 4px rgba(76, 175, 80, 0.2) !important;
        }
        
        .btn-download-c30:hover {
            background-color: #45a049 !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3) !important;
        }
        
        .btn-download-c30:active {
            transform: translateY(0) !important;
            box-shadow: 0 2px 4px rgba(76, 175, 80, 0.2) !important;
        }
    </style>
</head>
<body>
    <!-- 登录页面 -->
    <div id="login-page" class="login-container">
        <div class="login-card">
            <div class="system-logo">
                <h1>建筑固废再生混凝土配比设计系统</h1>
            </div>
            <form id="login-form">
                <div class="mb-3">
                    <label for="username" class="form-label">用户名</label>
                    <input type="text" class="form-control" id="username" placeholder="请输入用户名" value="admin" required="">
                </div>
                <div class="mb-4">
                    <label for="password" class="form-label">密码</label>
                    <input type="password" class="form-control" id="password" placeholder="请输入密码" value="password" required="">
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary-custom btn-lg">登录系统</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 主系统界面 -->
    <div id="main-system" class="main-container" style="display:none;">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h4 class="text-center">系统导航</h4>
            </div>
            <div class="sidebar-menu">
                <div class="menu-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i> 后台主页
                </div>
                
                <div class="menu-item" data-page="materials">
                    <i class="fas fa-boxes"></i> 原材料管理
                </div>
                
                <div class="menu-item" data-page="ratio">
                    <i class="fas fa-calculator"></i> 配合比计算
                </div>
                
                <div class="menu-item" data-page="performance">
                    <i class="fas fa-chart-line"></i> 多目标协同优化
                </div>
                
                <div class="menu-item" data-page="experiment">
                    <i class="fas fa-flask"></i> 实验验证
                </div>
                
                <div class="menu-item" data-page="materials-library">
                    <i class="fas fa-database"></i> 素材库
                </div>
                
                <div class="menu-item" data-page="database">
                    <i class="fas fa-table"></i> 数据库
                </div>
                

                

            </div>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">

            <!-- 仪表盘页面 -->
            <div id="dashboard" class="page-container active">
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <div class="card-icon" style="background-color: rgba(44, 120, 115, 0.1); color: var(--primary-color);">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="card-content">
                            <h3>原材料种类</h3>
                            <p id="material-count">0</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon" style="background-color: rgba(111, 185, 143, 0.1); color: var(--secondary-color);">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="card-content">
                            <h3>配合比计算记录</h3>
                            <p id="ratio-count">0</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon" style="background-color: rgba(255, 154, 60, 0.1); color: var(--accent-color);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="card-content">
                            <h3>性能预测分析</h3>
                            <p>42</p>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-icon" style="background-color: rgba(52, 58, 64, 0.1); color: var(--dark-color);">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="card-content">
                            <h3>生成报告数量</h3>
                            <p>24</p>
                        </div>
                    </div>
                </div>

                <div class="section-title">
                    <i class="fas fa-bolt"></i> 快捷功能入口
                </div>
                
                <div class="quick-access">
                    <div class="quick-item" data-page="materials">
                        <i class="fas fa-plus-circle"></i>
                        <h5>添加原材料</h5>
                        <p>新增原材料信息</p>
                    </div>
                    <div class="quick-item" data-page="ratio">
                        <i class="fas fa-calculator"></i>
                        <h5>配合比计算</h5>
                        <p>进行新配合比计算</p>
                    </div>
                    <div class="quick-item" data-page="experiment">
                        <i class="fas fa-flask"></i>
                        <h5>实验验证</h5>
                        <p>配比验证与创新技术</p>
                    </div>
                    <div class="quick-item" data-page="materials-library">
                        <i class="fas fa-database"></i>
                        <h5>素材库</h5>
                        <p>管理和查看项目参数</p>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="section-title">
                            <i class="fas fa-chart-pie"></i> 成本分析统计
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <h5>原材料成本</h5>
                                    <p class="stat-value">¥ <span id="material-cost">0</span></p>
                                </div>
                                <i class="fas fa-box stat-icon"></i>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <h5>运输成本</h5>
                                    <p class="stat-value">¥ 42,300</p>
                                </div>
                                <i class="fas fa-truck stat-icon"></i>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 35%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="section-title">
                            <i class="fas fa-leaf"></i> 环境影响评估
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <h5>资源利用率</h5>
                                    <p class="stat-value"><span id="resource-utilization">0</span>%</p>
                                </div>
                                <i class="fas fa-recycle stat-icon"></i>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 78%;" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-header">
                                <div>
                                    <h5>可持续性指数</h5>
                                    <p class="stat-value">8.6/10</p>
                                </div>
                                <i class="fas fa-seedling stat-icon"></i>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar" role="progressbar" style="width: 86%; background-color: var(--secondary-color);" aria-valuenow="86" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 原材料管理页面 -->
            <div id="materials" class="page-container">
                <div class="section-title">
                    <i class="fas fa-boxes"></i> 原材料管理
                </div>
                
                <!-- 添加/编辑原材料表单 -->
                <div id="material-form-container" class="form-container">
                    <div class="form-title">
                        <i class="fas fa-plus-circle"></i> <span id="material-form-title">添加原材料管理</span>
                    </div>
                    <form id="material-form">
                        <input type="hidden" id="edit-material-id">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="material-id" class="form-label required">主键 ID</label>
                                <input type="text" class="form-control" id="material-id" required="">
                            </div>
                            <div class="col-md-6">
                                <label for="material-name" class="form-label required">原材料名称</label>
                                <input type="text" class="form-control" id="material-name" required="">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="material-quantity" class="form-label">数量</label>
                                <input type="number" class="form-control" id="material-quantity" min="0" step="0.01">
                            </div>
                            <div class="col-md-6">
                                <label for="material-quality" class="form-label">质量</label>
                                <input type="text" class="form-control" id="material-quality">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="material-date" class="form-label">采购日期</label>
                                <input type="date" class="form-control" id="material-date">
                            </div>
                            <div class="col-md-6">
                                <label for="material-supplier" class="form-label">供应商</label>
                                <input type="text" class="form-control" id="material-supplier">
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button type="submit" class="btn btn-primary-custom" id="material-save-btn">保存信息</button>
                            <button type="button" class="btn btn-secondary" id="material-cancel-btn">取消</button>
                        </div>
                    </form>
                </div>
                
                <div class="data-table">
                    <div class="table-header">
                        <h5>原材料管理列表</h5>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead>
                                <tr>
                                    <th>主键 ID</th>
                                    <th>原材料名称</th>
                                    <th>数量 (kg)</th>
                                    <th>质量等级</th>
                                    <th>采购日期</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="materials-table-body">
                                <!-- 数据将动态加载 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 配合比计算页面 -->
            <div id="ratio" class="page-container">
                <!-- 标签页标题区域 -->
                <div class="calculation-tabs mb-4">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="normal-calculation">
                            <i class="fas fa-calculator me-2"></i>普通混凝土配合比计算
                        </button>
                        <button class="tab-btn" data-tab="recycled-calculation">
                            <i class="fas fa-recycle me-2"></i>再生混凝土配合比计算
                        </button>
                        <button class="tab-btn" data-tab="3d-printing">
                            <i class="fas fa-print me-2"></i>3D 打印砂浆配合比设计
                        </button>
                    </div>
                </div>
                
                <!-- 标签页内容区域 -->
                <div class="tab-content-container">
                    <!-- 原有配合比计算系统内容 -->
                    <div id="normal-calculation-content" class="tab-content active">
                        <div class="section-title">
                            <i class="fas fa-calculator"></i> 普通混凝土配合比计算
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 
                            <strong>本系统基于《混凝土配合比设计规程》实现自动计算。</strong>
                        </div>
                        
                        <!-- 输入参数区域 -->
                        <div class="form-container">
                            <div class="form-title">
                                <i class="fas fa-edit"></i> 输入参数
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label class="required">设计强度 fcu,k (MPa)</label>
                                        <input type="number" id="design-strength" value="" min="20" max="60" step="5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label class="required">碎石最大粒径 Dmax (mm)</label>
                                        <input type="number" id="max-aggregate-size" value="" min="10" max="40" step="5">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>标准差 σ (MPa)</label>
                                        <input type="number" id="standard-deviation" value="" min="3" max="8" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>含气量百分率 α (%)</label>
                                        <input type="number" id="air-content" value="" min="0" max="3" step="0.5">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>水泥实测强度 fce (MPa)</label>
                                        <input type="number" id="cement-strength" value="" min="25" max="50" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>坍落度要求 (mm)</label>
                                        <input type="number" id="slump-requirement" value="" min="30" max="220" step="10">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>外加剂掺量 (%)</label>
                                        <input type="number" id="admixture-content" value="" min="0" max="0.05" step="0.001">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>减水率 β (%)</label>
                                        <input type="number" id="water-reduction-rate" value="" min="0" max="30" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>砂表观密度 ρs (kg/m³)</label>
                                        <input type="number" id="sand-density" value="" min="2500" max="2800" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>石表观密度 ρg (kg/m³)</label>
                                        <input type="number" id="stone-density" value="" min="2500" max="2800" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>水泥密度 ρc (kg/m³)</label>
                                        <input type="number" id="cement-density" value="" min="2900" max="3100" step="10">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <button type="button" class="btn btn-primary-custom btn-lg" id="calculate-btn">
                                    <i class="fas fa-calculator me-2"></i>开始计算配合比
                                </button>
                            </div>
                        </div>
                        
                        <!-- 计算过程区域 -->
                        <div id="calculation-process" style="display: none;">
                            <div class="step-container">
                                <div class="step-title">
                                    <i class="fas fa-cogs"></i>计算过程
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>1. 确定混凝土配制强度 fcu,o (MPa)</h6>
                                    <div class="result-item">
                                        <span>fcu,o = fcu,k + 1.645σ =</span>
                                        <span id="design-strength-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>2. 计算水灰比 (w/c)</h6>
                                    <div class="result-item">
                                        <span>回归系数 a =</span>
                                        <span id="regression-coefficient-a">0.46</span>
                                    </div>
                                    <div class="result-item">
                                        <span>回归系数 b =</span>
                                        <span id="regression-coefficient-b">0.07</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水灰比 w/c =</span>
                                        <span id="water-cement-ratio-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>3. 确定单位用水量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>查表得出 mwo =</span>
                                        <span id="base-water-content">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>掺外加剂时用水量 mwa = mwo × (1-β) =</span>
                                        <span id="adjusted-water-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>4. 计算单位水泥用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>水泥用量 mco = mwa / (w/c) =</span>
                                        <span id="cement-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>5. 选用砂率 βs</h6>
                                    <div class="result-item">
                                        <span>查表得砂率 βs =</span>
                                        <span id="sand-ratio-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>6. 计算粗细集料单位用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>石子用量 mg0 =</span>
                                        <span id="stone-content">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>砂用量 ms0 =</span>
                                        <span id="sand-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>7. 配合比比例</h6>
                                    <div class="result-item">
                                        <span>水泥:砂:石:水 =</span>
                                        <span id="ratio-proportion">1:0:0:0</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>8. 外加剂用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>外加剂用量 =</span>
                                        <span id="admixture-content-result">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 最终结果 -->
                            <div class="final-result">
                                <h4><i class="fas fa-trophy me-2"></i>最终配合比结果</h4>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span>水泥用量</span>
                                        <span id="final-cement">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水用量</span>
                                        <span id="final-water">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>砂用量</span>
                                        <span id="final-sand">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>石用量</span>
                                        <span id="final-stone">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>外加剂用量</span>
                                        <span id="final-admixture">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水灰比</span>
                                        <span id="final-wc-ratio">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 迁移的普通配合比计算内容 -->

                    </div>
                    
                    <!-- 再生粗骨料配合比计算内容 -->
                    <div id="recycled-calculation-content" class="tab-content">
                        <div class="section-title">
                            <i class="fas fa-recycle"></i> 再生混凝土配合比计算
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 
                            <strong>本系统基于《再生骨料混凝土应用技术规程》实现自动计算。</strong>
                        </div>
                        
                        <!-- 输入参数区域 -->
                        <div class="form-container">
                            <div class="form-title">
                                <i class="fas fa-edit"></i> 输入参数
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label class="required">设计强度 fcu,k (MPa)</label>
                                        <input type="number" id="recycled-design-strength" value="" min="20" max="60" step="5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label class="required">再生骨料取代率 λg (%)</label>
                                        <input type="number" id="recycled-replacement-rate" value="" min="0" max="100" step="5">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>标准差 σ (MPa)</label>
                                        <input type="number" id="recycled-standard-deviation" value="" min="3" max="8" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>再生骨料吸水率 ωa (%)</label>
                                        <input type="number" id="recycled-absorption-rate" value="" min="1" max="8" step="0.5">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>水泥实测强度 fce (MPa)</label>
                                        <input type="number" id="recycled-cement-strength" value="" min="25" max="60" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>坍落度要求 (mm)</label>
                                        <input type="number" id="recycled-slump-requirement" value="" min="30" max="220" step="10">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>外加剂掺量 (%)</label>
                                        <input type="number" id="recycled-admixture-content" value="" min="0" max="3" step="0.1">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="recycled-input-group-custom">
                                        <label>减水率 β (%)</label>
                                        <input type="number" id="recycled-water-reduction-rate" value="" min="0" max="30" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="recycled-input-group-custom">
                                        <label>砂表观密度 ρs (kg/m³)</label>
                                        <input type="number" id="recycled-sand-density" value="" min="2500" max="2800" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="recycled-input-group-custom">
                                        <label>再生骨料密度 ρg (kg/m³)</label>
                                        <input type="number" id="recycled-aggregate-density" value="" min="2500" max="2800" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="recycled-input-group-custom">
                                        <label>水泥密度 ρc (kg/m³)</label>
                                        <input type="number" id="recycled-cement-density" value="" min="2900" max="3100" step="10">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <button type="button" class="btn btn-primary-custom btn-lg" id="recycled-calculate-btn">
                                    <i class="fas fa-calculator me-2"></i>开始计算再生混凝土配合比
                                </button>
                            </div>
                        </div>
                        
                        <!-- 计算过程区域 -->
                        <div id="recycled-calculation-process" style="display: none;">
                            <div class="step-container">
                                <div class="step-title">
                                    <i class="fas fa-cogs"></i>计算过程
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>1. 确定再生混凝土配制强度 fRg (MPa)</h6>
                                    <div class="result-item">
                                        <span>fRg = fcu,k + 1.645σ =</span>
                                        <span id="recycled-design-strength-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>2. 计算水胶比 (W/B)Rg</h6>
                                    <div class="result-item">
                                        <span>再生骨料影响系数 KRg =</span>
                                        <span id="recycled-influence-coefficient">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水胶比 (W/B)Rg =</span>
                                        <span id="recycled-water-cement-ratio-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>3. 确定单位用水量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>查表得出 m'w0 =</span>
                                        <span id="recycled-base-water-content">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>掺外加剂时用水量 mwg0 = m'w0 × (1-β) =</span>
                                        <span id="recycled-adjusted-water-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>4. 计算胶凝材料用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>胶凝材料总量 mb0 = mwg0 / (W/B)Rg =</span>
                                        <span id="recycled-cement-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>5. 选用砂率 βs</h6>
                                    <div class="result-item">
                                        <span>查表得砂率 βs =</span>
                                        <span id="recycled-sand-ratio-result">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>6. 计算骨料用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>再生粗骨料用量 mg0 =</span>
                                        <span id="recycled-recycled-aggregate-content">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>天然粗骨料用量 m'g0 =</span>
                                        <span id="recycled-natural-aggregate-content">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>细骨料用量 ms0 =</span>
                                        <span id="recycled-sand-content">0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>7. 配合比比例</h6>
                                    <div class="result-item">
                                        <span>水泥:砂:再生骨料:天然骨料:水 =</span>
                                        <span id="recycled-ratio-proportion">1:0:0:0:0</span>
                                    </div>
                                </div>
                                
                                <div class="recycled-calculation-step">
                                    <h6>8. 外加剂用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>外加剂用量 =</span>
                                        <span id="recycled-admixture-content-result">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 最终结果 -->
                            <div class="recycled-final-result">
                                <h4><i class="fas fa-trophy me-2"></i>最终再生混凝土配合比结果</h4>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span>水泥用量</span>
                                        <span id="recycled-final-cement">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水用量</span>
                                        <span id="recycled-final-water">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>砂用量</span>
                                        <span id="recycled-final-sand">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>再生粗骨料用量</span>
                                        <span id="recycled-final-recycled-aggregate">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>天然粗骨料用量</span>
                                        <span id="recycled-final-natural-aggregate">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>外加剂用量</span>
                                        <span id="recycled-final-admixture">0 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水胶比</span>
                                        <span id="recycled-final-wc-ratio">0</span>
                                    </div>
                                    <div class="result-item">
                                        <span>再生骨料取代率</span>
                                        <span id="recycled-final-replacement-rate">0%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 下载C30再生混凝土配合比设计试验检测报告按钮 -->
                            <div class="text-center mt-4">
                                <button type="button" class="btn btn-download-c30" id="download-c30-report-btn">
                                    <i class="fas fa-download me-2"></i>下载C30再生混凝土配合比设计试验检测报告
                                </button>
                            </div>
                        </div>
                        

                    </div>
                    
                    <!-- 3D 打印砂浆配合比设计内容 -->
                    <div id="3d-printing-content" class="tab-content">
                        <div class="section-title">
                            <i class="fas fa-print"></i> 3D 打印砂浆配合比设计
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i> 
                            本系统基于《3D打印混凝土技术规程 T/CECS 786-2020》实现自动计算，专门用于3D打印砂浆的配合比设计。
                        </div>
                        
                        <!-- 输入参数区域 -->
                        <div class="form-container">
                            <div class="form-title">
                                <i class="fas fa-edit"></i> 输入参数
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label class="required">设计强度等级</label>
                                        <select id="3d-design-strength" class="form-control">
                                            <option value="">请选择强度等级</option>
                                            <option value="30">C30</option>
                                            <option value="35">C35</option>
                                            <option value="40">C40</option>
                                            <option value="45">C45</option>
                                            <option value="50">C50</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label class="required">打印强度折减率 (%)</label>
                                        <input type="number" id="3d-strength-reduction" value="" min="15" max="25" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>标准差 σ (MPa)</label>
                                        <input type="number" id="3d-standard-deviation" value="" min="3" max="6" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>喷嘴出口直径 (mm)</label>
                                        <input type="number" id="3d-nozzle-diameter" value="" min="10" max="20" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>水泥实测强度 fce (MPa)</label>
                                        <input type="number" id="3d-cement-strength" value="" min="40" max="60" step="0.5">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>水胶比 (W/B)</label>
                                        <input type="number" id="3d-water-binder-ratio" value="" min="0.36" max="0.42" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>胶凝材料用量 (kg/m³)</label>
                                        <input type="number" id="3d-binder-content" value="" min="350" max="450" step="10">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group-custom">
                                        <label>外加剂掺量 (%)</label>
                                        <input type="number" id="3d-admixture-content" value="" min="0.5" max="1.5" step="0.1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>砂表观密度 ρs (kg/m³)</label>
                                        <input type="number" id="3d-sand-density" value="" min="2500" max="2800" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>水泥密度 ρc (kg/m³)</label>
                                        <input type="number" id="3d-cement-density" value="" min="2900" max="3100" step="10">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group-custom">
                                        <label>粉煤灰掺量 (%)</label>
                                        <input type="number" id="3d-fly-ash-content" value="" min="0" max="40" step="5">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <button type="button" class="btn btn-primary-custom btn-lg" id="3d-calculate-btn">
                                    <i class="fas fa-calculator me-2"></i>开始计算3D打印砂浆配合比
                                </button>
                            </div>
                        </div>
                        
                        <!-- 计算过程区域 -->
                        <div id="3d-calculation-process" style="display: none;">
                            <div class="step-container">
                                <div class="step-title">
                                    <i class="fas fa-cogs"></i>计算过程
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>1. 确定配制强度 fcu,0 (MPa)</h6>
                                    <div class="result-item">
                                        <span>设计强度折减后: fcu,k = 30 / (1 - 0.2) =</span>
                                        <span id="3d-adjusted-strength">37.5</span>
                                    </div>
                                    <div class="result-item">
                                        <span>配制强度: fcu,0 = 37.5 + 1.645 × 4.0 =</span>
                                        <span id="3d-design-strength-result">44.1</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>2. 水胶比 (W/B)</h6>
                                    <div class="result-item">
                                        <span>根据标准要求: W/B =</span>
                                        <span id="3d-water-binder-ratio-result">0.38</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>3. 胶凝材料用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>胶凝材料用量: mb = 44.1 / (0.38 × 48.5 经验系数) ≈</span>
                                        <span id="3d-binder-content-result">420</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>4. 用水量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>用水量: mw = 420 × 0.38 =</span>
                                        <span id="3d-water-content-result">160</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>5. 骨料用量计算 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>骨料体积: Vs = 1 - (420/3100 + 160/1000) ≈</span>
                                        <span id="3d-aggregate-volume">0.68</span>
                                    </div>
                                    <div class="result-item">
                                        <span>骨料质量: ms = 0.68 × 2650 ≈</span>
                                        <span id="3d-sand-content">1800</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>6. 外加剂用量 (kg/m³)</h6>
                                    <div class="result-item">
                                        <span>外加剂用量: ma = 420 × 0.01 =</span>
                                        <span id="3d-admixture-content-result">4.2</span>
                                    </div>
                                </div>
                                
                                <div class="calculation-step">
                                    <h6>7. 配合比比例</h6>
                                    <div class="result-item">
                                        <span>水泥:粉煤灰:砂:水:减水剂 =</span>
                                        <span id="3d-ratio-proportion">1:0.2:5.14:0.46:0.012</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 最终结果 -->
                            <div class="final-result">
                                <h4><i class="fas fa-trophy me-2"></i>最终3D打印砂浆配合比结果 (kg/m³)</h4>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span>水泥</span>
                                        <span id="3d-final-cement">350 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>粉煤灰</span>
                                        <span id="3d-final-fly-ash">70 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>砂</span>
                                        <span id="3d-final-sand">1800 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水</span>
                                        <span id="3d-final-water">160 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>减水剂</span>
                                        <span id="3d-final-admixture">4.2 kg/m³</span>
                                    </div>
                                    <div class="result-item">
                                        <span>水胶比</span>
                                        <span id="3d-final-wc-ratio">0.38</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                </div>
            </div>

            <!-- 多目标协同优化模块 -->
            <div id="performance" class="page-container">
                <div class="section-title">
                    <i class="fas fa-chart-line"></i> 多目标协同优化
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> 多目标协同优化模块综合考虑碳排放、经济性和性能指标，为混凝土配比设计提供最优解决方案。
                </div>
                
                <!-- 碳排放测算模块 -->
                <div class="form-container mb-4">
                    <div class="form-title">
                        <i class="fas fa-leaf"></i> 碳排放测算模块
                    </div>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div style="position: relative; height: 400px;">
                                <canvas id="carbon-chart"></canvas>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-info-circle me-2"></i> 碳减排分析</h6>
                                </div>
                                <div class="card-body">
                                    <div class="result-item">
                                        <span>全再生方案降碳:</span>
                                        <span class="text-success fw-bold">30%</span>
                                    </div>
                                    <div class="result-item">
                                        <span>50%再生方案降碳:</span>
                                        <span class="text-warning fw-bold">18%</span>
                                    </div>
                                    <div class="result-item">
                                        <span>传统方案基准:</span>
                                        <span class="text-muted">0%</span>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-success" id="update-carbon-btn">
                                            <i class="fas fa-sync-alt me-1"></i> 更新测算
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 经济性看板 -->
                <div class="form-container mb-4">
                    <div class="form-title">
                        <i class="fas fa-money-bill-wave"></i> 经济性看板
                    </div>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div style="position: relative; height: 400px;">
                                <canvas id="cost-chart"></canvas>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-chart-pie me-2"></i> 成本构成分析</h6>
                                </div>
                                <div class="card-body">
                                    <div id="cost-breakdown">
                                        <p class="text-muted">点击曲线上任意点查看成本构成</p>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-primary" id="update-cost-btn">
                                            <i class="fas fa-calculator me-1"></i> 重新计算
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 成本构成饼图 -->
                    <div class="row mt-3" id="cost-pie-container" style="display: none;">
                        <div class="col-md-6">
                            <div style="position: relative; height: 300px;">
                                <canvas id="cost-pie-chart"></canvas>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-list me-2"></i> 成本明细</h6>
                                </div>
                                <div class="card-body" id="cost-details">
                                    <!-- 成本明细将动态生成 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 性能预测 -->
                <div class="form-container">
                    <div class="form-title">
                        <i class="fas fa-tachometer-alt"></i> 性能预测
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-chart-line me-2"></i> 坍落度损失模拟</h6>
                                </div>
                                <div class="card-body">
                                    <div style="position: relative; height: 300px;">
                                        <canvas id="slump-chart"></canvas>
                                    </div>
                                    <div class="mt-3">
                                        <div class="result-item">
                                            <span>初始坍落度:</span>
                                            <span id="initial-slump">180 mm</span>
                                        </div>
                                        <div class="result-item">
                                            <span>60分钟保留值:</span>
                                            <span id="slump-60min">145 mm</span>
                                        </div>
                                        <div class="result-item">
                                            <span>120分钟保留值:</span>
                                            <span id="slump-120min">120 mm</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-chart-bar me-2"></i> 28d强度发展预测</h6>
                                </div>
                                <div class="card-body">
                                    <div style="position: relative; height: 300px;">
                                        <canvas id="strength-prediction-chart"></canvas>
                                    </div>
                                    <div class="mt-3">
                                        <div class="alert alert-info">
                                            <small><i class="fas fa-info-circle me-1"></i> 系统基于历史数据预测强度发展，偏差率≤5%</small>
                                        </div>
                                        <div class="result-item">
                                            <span>3d强度达设计值:</span>
                                            <span id="strength-3d-ratio">60%</span>
                                        </div>
                                        <div class="result-item">
                                            <span>28d强度达标:</span>
                                            <span id="strength-28d-status" class="text-success">是</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 实验验证页面 -->
            <div id="experiment" class="page-container">
                <div class="section-title">
                    <i class="fas fa-flask"></i> 实验验证
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> 实验验证模块用于验证配比方案的可行性，包括工作性测试、强度预测和异常处理等功能。
                </div>
                
                <!-- 配比验证实验 -->
                <div class="form-container">
                    <div class="form-title">
                        <i class="fas fa-cogs"></i> 配比验证实验
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-calculator me-2"></i>生成C30配比方案</h6>
                                </div>
                                <div class="card-body">
                                    <button class="btn btn-primary-custom" id="generate-c30-btn">
                                        <i class="fas fa-magic me-1"></i> 生成C30配比
                                    </button>
                                    <div id="c30-result" class="mt-3" style="display: none;">
                                        <div class="alert alert-success">
                                            <h6>推荐C30配比方案：</h6>
                                            <div class="row">
                                                <div class="col-6">水泥: <strong>320 kg/m³</strong></div>
                                                <div class="col-6">水: <strong>160 kg/m³</strong></div>
                                                <div class="col-6">再生骨料: <strong>850 kg/m³</strong></div>
                                                <div class="col-6">砂: <strong>650 kg/m³</strong></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-clipboard-list me-2"></i>记录实测工作性数据</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row mb-2">
                                        <div class="col-6">
                                            <label class="form-label">坍落度 (mm)</label>
                                            <input type="number" class="form-control" id="slump" min="0" max="300" value="180">
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">扩展度 (mm)</label>
                                            <input type="number" class="form-control" id="spread" min="0" max="800" value="450">
                                        </div>
                                    </div>
                                    <button class="btn btn-success" id="save-workability-btn">
                                        <i class="fas fa-save me-1"></i> 保存数据
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 预测值与实测值对比 -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6><i class="fas fa-chart-bar me-2"></i>预测值与实测值对比</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>强度对比</h6>
                                    <div class="result-item">
                                        <span>预测28天强度:</span>
                                        <span id="predicted-strength-28">32.5 MPa</span>
                                    </div>
                                    <div class="result-item">
                                        <span>实测28天强度:</span>
                                        <span id="actual-strength-28">31.8 MPa</span>
                                    </div>
                                    <div class="result-item">
                                        <span>误差率:</span>
                                        <span id="strength-error">2.2%</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6>工作性对比</h6>
                                    <div class="result-item">
                                        <span>预测坍落度:</span>
                                        <span id="predicted-slump">175 mm</span>
                                    </div>
                                    <div class="result-item">
                                        <span>实测坍落度:</span>
                                        <span id="actual-slump">180 mm</span>
                                    </div>
                                    <div class="result-item">
                                        <span>误差率:</span>
                                        <span id="slump-error">2.8%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 强度发展曲线预测 -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6><i class="fas fa-chart-line me-2"></i>强度发展曲线预测</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div style="position: relative; height: 300px;">
                                        <canvas id="strength-chart"></canvas>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <h6>强度发展数据</h6>
                                    <div class="result-item">
                                        <span>3天强度:</span>
                                        <span id="strength-3d">18.5 MPa</span>
                                    </div>
                                    <div class="result-item">
                                        <span>7天强度:</span>
                                        <span id="strength-7d">25.2 MPa</span>
                                    </div>
                                    <div class="result-item">
                                        <span>28天强度:</span>
                                        <span id="strength-28d">32.5 MPa</span>
                                    </div>
                                    <div class="result-item">
                                        <span>90天强度:</span>
                                        <span id="strength-90d">38.1 MPa</span>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-sm btn-primary" id="update-strength-chart-btn">
                                            <i class="fas fa-sync-alt me-1"></i> 更新预测
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 创新技术演示 -->
                <div class="form-container">
                    <div class="form-title">
                        <i class="fas fa-lightbulb"></i> 创新技术演示
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-tint me-2"></i>预湿调控技术</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">当前含水率 (%)</label>
                                        <input type="number" class="form-control" id="current-moisture" min="0" max="20" step="0.1" value="3.2">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">目标含水率 (%)</label>
                                        <input type="number" class="form-control" id="target-moisture" min="0" max="20" step="0.1" value="4.0">
                                    </div>
                                    <button class="btn btn-info" id="calculate-moisture-btn">
                                        <i class="fas fa-calculator me-1"></i> 计算修正量
                                    </button>
                                    <div id="moisture-result" class="mt-3" style="display: none;">
                                        <div class="alert alert-info">
                                            <strong>含水率动态修正结果：</strong><br>
                                            需要增加水量: <span id="water-adjustment">0.8</span> kg/m³<br>
                                            修正后水灰比: <span id="adjusted-wc-ratio">0.50</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-exclamation-triangle me-2"></i>异常处理系统</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">含泥量检测值 (%)</label>
                                        <input type="number" class="form-control" id="clay-content" min="0" max="10" step="0.1" value="2.5">
                                    </div>
                                    <button class="btn btn-warning" id="check-clay-btn">
                                        <i class="fas fa-search me-1"></i> 检测含泥量
                                    </button>
                                    <div id="clay-result" class="mt-3" style="display: none;">
                                        <div class="alert alert-warning">
                                            <strong>含泥量超标预警：</strong><br>
                                            当前含泥量: <span id="current-clay">2.5</span>%<br>
                                            标准限值: <span id="clay-limit">3.0</span>%<br>
                                            状态: <span id="clay-status">正常</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 实验过程视频区域 -->
                <div class="form-container">
                    <div class="form-title">
                        <i class="fas fa-video"></i> 实验过程视频展示
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-ruler-combined me-2"></i> 扩展度测试</h6>
                                </div>
                                <div class="card-body">
                                    <div class="video-container" style="position: relative; height: 200px; border-radius: 8px; margin-bottom: 15px; overflow: hidden;">
                                        <video id="video-spread-test" style="width: 100%; height: 100%; object-fit: cover;" controls="">
                                            <source src="videos/spread-test.mp4" type="video/mp4">
                                            <source src="videos/spread-test.webm" type="video/webm">
                                            您的浏览器不支持视频播放。
                                        </video>
                                        <div class="video-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;">
                                            <i class="fas fa-play-circle" style="font-size: 3rem; color: white;"></i>
                                        </div>
                                    </div>
                                    <div class="video-info">
                                        <h6>测试内容：</h6>
                                        <ul class="list-unstyled small">
                                            <li><i class="fas fa-check text-success me-1"></i> 混凝土扩展度测量</li>
                                            <li><i class="fas fa-check text-success me-1"></i> 工作性评估</li>
                                            <li><i class="fas fa-check text-success me-1"></i> 流动性分析</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-cube me-2"></i> 试件制作</h6>
                                </div>
                                <div class="card-body">
                                    <div class="video-container" style="position: relative; height: 200px; border-radius: 8px; margin-bottom: 15px; overflow: hidden;">
                                        <video id="video-specimen-making" style="width: 100%; height: 100%; object-fit: cover;" controls="">
                                            <source src="videos/specimen-making.mp4" type="video/mp4">
                                            <source src="videos/specimen-making.webm" type="video/webm">
                                            您的浏览器不支持视频播放。
                                        </video>
                                        <div class="video-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;">
                                            <i class="fas fa-play-circle" style="font-size: 3rem; color: white;"></i>
                                        </div>
                                    </div>
                                    <div class="video-info">
                                        <h6>制作流程：</h6>
                                        <ul class="list-unstyled small">
                                            <li><i class="fas fa-check text-success me-1"></i> 模具准备与涂油</li>
                                            <li><i class="fas fa-check text-success me-1"></i> 混凝土浇筑</li>
                                            <li><i class="fas fa-check text-success me-1"></i> 振捣密实</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6><i class="fas fa-exclamation-triangle me-2"></i> 系统报警提示</h6>
                                </div>
                                <div class="card-body">
                                    <div class="video-container" style="position: relative; height: 200px; border-radius: 8px; margin-bottom: 15px; overflow: hidden;">
                                        <video id="video-alarm-system" style="width: 100%; height: 100%; object-fit: cover;" controls="">
                                            <source src="videos/alarm-system.mp4" type="video/mp4">
                                            <source src="videos/alarm-system.webm" type="video/webm">
                                            您的浏览器不支持视频播放。
                                        </video>
                                        <div class="video-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;">
                                            <i class="fas fa-play-circle" style="font-size: 3rem; color: white;"></i>
                                        </div>
                                    </div>
                                    <div class="video-info">
                                        <h6>报警类型：</h6>
                                        <ul class="list-unstyled small">
                                            <li><i class="fas fa-exclamation-triangle text-warning me-1"></i> 含泥量超标预警</li>
                                            <li><i class="fas fa-exclamation-triangle text-warning me-1"></i> 强度不达标提醒</li>
                                            <li><i class="fas fa-exclamation-triangle text-warning me-1"></i> 参数异常检测</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                </div>
                            </div>
            </div>

            <!-- 素材库页面 -->
            <div id="materials-library" class="page-container">
                <div class="section-title">
                    <i class="fas fa-database"></i> 素材库管理
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> 素材库用于管理和查看不同混凝土项目的各类参数，包括项目名称、混凝土类型、原材料配比、性能参数和登记时间等信息。
                </div>
                
                <!-- 素材库数据表格 -->
                <div class="data-table">
                    <div class="table-header">
                        <h5>项目素材库列表</h5>
                        <button class="btn btn-primary-custom" id="add-material-library-btn">
                            <i class="fas fa-plus me-1"></i> 新增项目素材
                        </button>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead>
                                <tr>
                                    <th>项目名称</th>
                                    <th>混凝土类型</th>
                                    <th>原材料配比</th>
                                    <th>性能参数</th>
                                    <th>登记时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="materials-library-table-body">
                                <!-- 数据将动态加载 -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 添加/编辑素材库表单 -->
                <div id="material-library-form-container" class="form-container" style="display: none;">
                    <div class="form-title">
                        <i class="fas fa-plus-circle"></i> <span id="material-library-form-title">添加项目素材</span>
                    </div>
                    <form id="material-library-form">
                        <input type="hidden" id="edit-material-library-id">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="project-name" class="form-label required">项目名称</label>
                                <input type="text" class="form-control" id="project-name" placeholder="如：城市中心大厦建设" required="">
                            </div>
                            <div class="col-md-6">
                                <label for="concrete-type-library" class="form-label required">混凝土类型</label>
                                <select class="form-select" id="concrete-type-library" required="">
                                    <option value="">请选择混凝土类型</option>
                                    <option value="C30">C30再生混凝土</option>
                                    <option value="C35">C35再生混凝土</option>
                                    <option value="C40">C40再生混凝土</option>
                                    <option value="C30-PCM">C30相变混凝土</option>
                                    <option value="C35-PCM">C35相变混凝土</option>
                                    <option value="C40-PCM">C40相变混凝土</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="cement-ratio" class="form-label">水泥用量 (kg/m³)</label>
                                <input type="number" class="form-control" id="cement-ratio" min="0" step="1" value="350">
                            </div>
                            <div class="col-md-4">
                                <label for="water-ratio" class="form-label">水用量 (kg/m³)</label>
                                <input type="number" class="form-control" id="water-ratio" min="0" step="1" value="180">
                            </div>
                            <div class="col-md-4">
                                <label for="aggregate-ratio" class="form-label">骨料用量 (kg/m³)</label>
                                <input type="number" class="form-control" id="aggregate-ratio" min="0" step="1" value="800">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="sand-ratio-input" class="form-label">砂率 (%)</label>
                                <input type="number" class="form-control" id="sand-ratio-input" min="0" max="100" step="1" value="40">
                            </div>
                            <div class="col-md-4">
                                <label for="pcm-ratio" class="form-label">相变材料含量 (%)</label>
                                <input type="number" class="form-control" id="pcm-ratio" min="0" max="15" step="0.1" value="5">
                            </div>
                            <div class="col-md-4">
                                <label for="waste-percentage-library" class="form-label">固废掺量 (%)</label>
                                <input type="number" class="form-control" id="waste-percentage-library" min="0" max="100" step="5" value="30">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="strength-28d" class="form-label">28天强度 (MPa)</label>
                                <input type="number" class="form-control" id="strength-28d" min="0" step="0.1" value="35">
                            </div>
                            <div class="col-md-4">
                                <label for="slump-value" class="form-label">坍落度 (mm)</label>
                                <input type="number" class="form-control" id="slump-value" min="0" max="300" value="180">
                            </div>
                            <div class="col-md-4">
                                <label for="cost-per-cubic" class="form-label">单方成本 (元/m³)</label>
                                <input type="number" class="form-control" id="cost-per-cubic" min="0" step="0.1" value="280">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="waste-type-library" class="form-label">固废种类</label>
                                <select class="form-select" id="waste-type-library">
                                    <option value="">请选择固废种类</option>
                                    <option value="废弃混凝土">废弃混凝土</option>
                                    <option value="废弃砖石">废弃砖石</option>
                                    <option value="尾矿">尾矿</option>
                                    <option value="粉煤灰">粉煤灰</option>
                                    <option value="矿渣">矿渣</option>
                                    <option value="建筑垃圾">建筑垃圾</option>
                                    <option value="再生骨料">再生骨料</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="registration-date" class="form-label">登记时间</label>
                                <input type="date" class="form-control" id="registration-date" value="2025-07-31">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-12">
                                <label for="project-description" class="form-label">项目描述</label>
                                <textarea class="form-control" id="project-description" rows="3" placeholder="请输入项目详细描述，包括应用场景、特殊要求等"></textarea>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button type="submit" class="btn btn-primary-custom" id="material-library-save-btn">保存素材</button>
                            <button type="button" class="btn btn-secondary" id="material-library-cancel-btn">取消</button>
                        </div>
                    </form>
                </div>
                
                <!-- 底部间距 -->
                <div class="bottom-spacing"></div>
            </div>

            <!-- 数据库页面 -->
            <div id="database" class="page-container">
                <div class="section-title">
                    <i class="fas fa-table"></i> 数据库
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> 数据库包含再生骨料混凝土配合比及抗压强度、塌落度试验结果等详细数据表格。
                </div>
                
                <!-- 表5 再生骨料混凝土配合比及抗压强度试验结果 -->
                <div class="form-container mb-4">
                    <div class="form-title">
                        <i class="fas fa-table"></i> 表5 再生骨料混凝土配合比及抗压强度试验结果
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-success">
                                <tr>
                                    <th>试件编号</th>
                                    <th colspan="5" class="text-center">各材料用量/(kg·m⁻³)</th>
                                    <th>水灰比</th>
                                    <th>再生骨料取代率/%</th>
                                    <th>抗压强度/MPa</th>
                                </tr>
                                <tr>
                                    <th></th>
                                    <th>水</th>
                                    <th>水泥</th>
                                    <th>砂</th>
                                    <th>天然骨料</th>
                                    <th>再生骨料</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>A1-0</td><td>180</td><td>600</td><td>602.5</td><td>1072.5</td><td>0.0</td><td>0.30</td><td>0</td><td>75.2</td></tr>
                                <tr><td>A1-50</td><td>180</td><td>600</td><td>590.2</td><td>525.2</td><td>525.2</td><td>0.30</td><td>50</td><td>58.4</td></tr>
                                <tr><td>A1-100</td><td>180</td><td>600</td><td>578.6</td><td>0.0</td><td>1030.0</td><td>0.30</td><td>100</td><td>55.3</td></tr>
                                <tr><td>A2-0</td><td>180</td><td>514</td><td>629.6</td><td>1120.7</td><td>0.0</td><td>0.35</td><td>0</td><td>62.0</td></tr>
                                <tr><td>A2-50</td><td>180</td><td>514</td><td>616.7</td><td>548.8</td><td>548.8</td><td>0.35</td><td>50</td><td>59.6</td></tr>
                                <tr><td>A2-100</td><td>180</td><td>514</td><td>604.6</td><td>0.0</td><td>1076.3</td><td>0.35</td><td>100</td><td>55.9</td></tr>
                                <tr><td>A3-0</td><td>180</td><td>450</td><td>649.7</td><td>1156.5</td><td>0.0</td><td>0.40</td><td>0</td><td>56.4</td></tr>
                                <tr><td>A3-50</td><td>180</td><td>450</td><td>636.4</td><td>566.4</td><td>566.4</td><td>0.40</td><td>50</td><td>51.3</td></tr>
                                <tr><td>A3-100</td><td>180</td><td>450</td><td>624.0</td><td>0.0</td><td>1110.7</td><td>0.40</td><td>100</td><td>49.2</td></tr>
                                <tr><td>A4-0</td><td>180</td><td>400</td><td>665.6</td><td>1184.7</td><td>0.0</td><td>0.45</td><td>0</td><td>47.5</td></tr>
                                <tr><td>A4-50</td><td>180</td><td>400</td><td>651.9</td><td>580.2</td><td>580.2</td><td>0.45</td><td>50</td><td>45.7</td></tr>
                                <tr><td>A4-100</td><td>180</td><td>400</td><td>639.2</td><td>0.0</td><td>1137.8</td><td>0.45</td><td>100</td><td>41.6</td></tr>
                                <tr><td>A5-0</td><td>180</td><td>360</td><td>678.3</td><td>1207.3</td><td>0.0</td><td>0.50</td><td>0</td><td>43.6</td></tr>
                                <tr><td>A5-50</td><td>180</td><td>360</td><td>664.4</td><td>591.3</td><td>591.3</td><td>0.50</td><td>50</td><td>41.2</td></tr>
                                <tr><td>A5-100</td><td>180</td><td>360</td><td>651.4</td><td>0.0</td><td>1159.5</td><td>0.50</td><td>100</td><td>37.4</td></tr>
                                <tr><td>A6-0</td><td>180</td><td>327</td><td>688.5</td><td>1225.6</td><td>0.0</td><td>0.55</td><td>0</td><td>38.2</td></tr>
                                <tr><td>A6-50</td><td>180</td><td>327</td><td>674.4</td><td>600.2</td><td>600.2</td><td>0.55</td><td>50</td><td>35.3</td></tr>
                                <tr><td>A6-100</td><td>180</td><td>327</td><td>661.2</td><td>0.0</td><td>1177.0</td><td>0.55</td><td>100</td><td>34.2</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 表6 再生骨料混凝土配合比及抗压强度、塌落度试验结果 -->
                <div class="form-container mb-4">
                    <div class="form-title">
                        <i class="fas fa-table"></i> 表6 再生骨料混凝土配合比及抗压强度、塌落度试验结果
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-success">
                                <tr>
                                    <th>试件编号</th>
                                    <th colspan="5" class="text-center">各材料用量/(kg·m⁻³)</th>
                                    <th>再生骨料取代率/%</th>
                                    <th>塌落度/mm</th>
                                    <th>抗压强度/MPa</th>
                                </tr>
                                <tr>
                                    <th></th>
                                    <th>水</th>
                                    <th>水泥</th>
                                    <th>砂</th>
                                    <th>天然骨料</th>
                                    <th>再生骨料</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>B1-0</td><td>160</td><td>550</td><td>556.6</td><td>1219.5</td><td>0.0</td><td>0</td><td>175</td><td>56.4</td></tr>
                                <tr><td>B1-50</td><td>160</td><td>550</td><td>545.2</td><td>609.8</td><td>609.8</td><td>50</td><td>165</td><td>52.8</td></tr>
                                <tr><td>B1-100</td><td>160</td><td>550</td><td>534.1</td><td>0.0</td><td>1171.2</td><td>100</td><td>155</td><td>49.5</td></tr>
                                <tr><td>B2-0</td><td>170</td><td>500</td><td>580.3</td><td>1165.2</td><td>0.0</td><td>0</td><td>170</td><td>52.1</td></tr>
                                <tr><td>B2-50</td><td>170</td><td>500</td><td>568.7</td><td>582.6</td><td>582.6</td><td>50</td><td>160</td><td>48.9</td></tr>
                                <tr><td>B2-100</td><td>170</td><td>500</td><td>557.4</td><td>0.0</td><td>1117.8</td><td>100</td><td>150</td><td>45.7</td></tr>
                                <tr><td>B3-0</td><td>180</td><td>450</td><td>605.1</td><td>1110.9</td><td>0.0</td><td>0</td><td>165</td><td>47.8</td></tr>
                                <tr><td>B3-50</td><td>180</td><td>450</td><td>592.3</td><td>555.5</td><td>555.5</td><td>50</td><td>155</td><td>44.2</td></tr>
                                <tr><td>B3-100</td><td>180</td><td>450</td><td>580.2</td><td>0.0</td><td>1064.6</td><td>100</td><td>145</td><td>41.1</td></tr>
                                <tr><td>B4-0</td><td>190</td><td>400</td><td>630.8</td><td>1056.6</td><td>0.0</td><td>0</td><td>160</td><td>43.5</td></tr>
                                <tr><td>B4-50</td><td>190</td><td>400</td><td>617.9</td><td>528.3</td><td>528.3</td><td>50</td><td>150</td><td>40.3</td></tr>
                                <tr><td>B4-100</td><td>190</td><td>400</td><td>605.4</td><td>0.0</td><td>1011.4</td><td>100</td><td>140</td><td>37.2</td></tr>
                                <tr><td>B5-0</td><td>200</td><td>350</td><td>656.5</td><td>1002.3</td><td>0.0</td><td>0</td><td>155</td><td>39.2</td></tr>
                                <tr><td>B5-50</td><td>200</td><td>350</td><td>643.5</td><td>501.2</td><td>501.2</td><td>50</td><td>145</td><td>36.1</td></tr>
                                <tr><td>B5-100</td><td>200</td><td>350</td><td>630.6</td><td>0.0</td><td>958.2</td><td>100</td><td>135</td><td>33.4</td></tr>
                                <tr><td>B6-0</td><td>210</td><td>300</td><td>682.2</td><td>948.0</td><td>0.0</td><td>0</td><td>150</td><td>35.1</td></tr>
                                <tr><td>B6-50</td><td>210</td><td>300</td><td>669.1</td><td>474.0</td><td>474.0</td><td>50</td><td>140</td><td>32.2</td></tr>
                                <tr><td>B6-100</td><td>210</td><td>300</td><td>655.8</td><td>0.0</td><td>905.0</td><td>100</td><td>130</td><td>29.8</td></tr>
                                <tr><td>B7-0</td><td>220</td><td>250</td><td>707.9</td><td>893.7</td><td>0.0</td><td>0</td><td>145</td><td>31.2</td></tr>
                                <tr><td>B7-50</td><td>220</td><td>250</td><td>694.7</td><td>446.9</td><td>446.9</td><td>50</td><td>135</td><td>28.5</td></tr>
                                <tr><td>B7-100</td><td>220</td><td>250</td><td>681.0</td><td>0.0</td><td>851.8</td><td>100</td><td>125</td><td>26.3</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 表7 采用新计算方法的再生骨料混凝土配合比及抗压强度、塌落度试验结果 -->
                <div class="form-container">
                    <div class="form-title">
                        <i class="fas fa-table"></i> 表7 采用新计算方法的再生骨料混凝土配合比及抗压强度、塌落度试验结果
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-success">
                                <tr>
                                    <th>试件编号</th>
                                    <th colspan="5" class="text-center">各材料用量/(kg·m⁻³)</th>
                                    <th>再生骨料取代率/%</th>
                                    <th>砂率/%</th>
                                    <th>塌落度/mm</th>
                                    <th>密度/(kg·m⁻³)</th>
                                    <th>抗压强度/MPa</th>
                                </tr>
                                <tr>
                                    <th></th>
                                    <th>水</th>
                                    <th>水泥</th>
                                    <th>砂</th>
                                    <th>天然骨料</th>
                                    <th>再生骨料</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>C1-0</td><td>180</td><td>450</td><td>650.1</td><td>1155.7</td><td>0.0</td><td>0</td><td>36.0</td><td>34</td><td>2435.8</td><td>56.9</td></tr>
                                <tr><td>C1-25</td><td>180</td><td>450</td><td>664.2</td><td>841.2</td><td>280.4</td><td>25</td><td>37.2</td><td>30</td><td>2415.8</td><td>55.7</td></tr>
                                <tr><td>C1-50</td><td>180</td><td>450</td><td>678.1</td><td>544.2</td><td>544.2</td><td>50</td><td>38.4</td><td>29</td><td>2396.5</td><td>54.4</td></tr>
                                <tr><td>C1-75</td><td>180</td><td>450</td><td>690.9</td><td>264.6</td><td>793.8</td><td>75</td><td>39.5</td><td>28</td><td>2379.3</td><td>52.6</td></tr>
                                <tr><td>C1-100</td><td>180</td><td>450</td><td>701.9</td><td>0.0</td><td>1030.7</td><td>100</td><td>40.5</td><td>26</td><td>2362.6</td><td>51.2</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 底部间距 -->
                <div class="bottom-spacing"></div>
            </div>




        </div>

        <!-- 通知容器 -->
    <div class="toast-container">
        <!-- 通知将通过JavaScript动态添加 -->
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // 多目标协同优化图表
        let strengthChart = null;
        let carbonChart = null;
        let costChart = null;
        let costPieChart = null;
        let slumpChart = null;
        let strengthPredictionChart = null;
        

        
        // 初始化强度发展曲线图表
        function initStrengthChart() {
            const ctx = document.getElementById('strength-chart').getContext('2d');
            
            const data = {
                labels: ['0天', '3天', '7天', '14天', '28天', '60天', '90天'],
                datasets: [{
                    label: '预测强度 (MPa)',
                    data: [0, 18.5, 25.2, 29.8, 32.5, 36.2, 38.1],
                    borderColor: 'rgb(44, 120, 115)',
                    backgroundColor: 'rgba(44, 120, 115, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: 'rgb(44, 120, 115)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }, {
                    label: '实测强度 (MPa)',
                    data: [0, 17.8, 24.5, 28.9, 31.8, null, null],
                    borderColor: 'rgb(255, 154, 60)',
                    backgroundColor: 'rgba(255, 154, 60, 0.1)',
                    borderWidth: 3,
                    fill: false,
                    tension: 0.4,
                    pointBackgroundColor: 'rgb(255, 154, 60)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '混凝土强度发展曲线',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y + ' MPa';
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '养护时间 (天)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '抗压强度 (MPa)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            min: 0,
                            max: 45,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            };
            
            strengthChart = new Chart(ctx, config);
        }
        

        
        // 初始化碳排放测算图表
        function initCarbonChart() {
            const ctx = document.getElementById('carbon-chart').getContext('2d');
            
            const data = {
                labels: ['传统方案', '50%再生骨料方案', '全再生骨料方案'],
                datasets: [{
                    label: '碳足迹 (kg CO₂/m³)',
                    data: [350, 287, 245],
                    backgroundColor: [
                        'rgba(220, 53, 69, 0.8)',
                        'rgba(255, 193, 7, 0.8)',
                        'rgba(40, 167, 69, 0.8)'
                    ],
                    borderColor: [
                        'rgb(220, 53, 69)',
                        'rgb(255, 193, 7)',
                        'rgb(40, 167, 69)'
                    ],
                    borderWidth: 2,
                    borderRadius: 8
                }]
            };
            
            const config = {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '不同方案碳足迹对比',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                afterBody: function(context) {
                                    const index = context[0].dataIndex;
                                    const reductions = [
                                        '基准方案',
                                        '减少天然骨料开采碳排放 25kg/m³，降低水泥用量减少碳排放 15kg/m³',
                                        '减少天然骨料开采碳排放 40kg/m³，降低水泥用量减少碳排放 25kg/m³，减少运输碳排放 20kg/m³'
                                    ];
                                    return reductions[index];
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: '碳足迹 (kg CO₂/m³)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            min: 0,
                            max: 400
                        }
                    }
                }
            };
            
            carbonChart = new Chart(ctx, config);
        }
        
        // 初始化经济性看板图表
        function initCostChart() {
            const ctx = document.getElementById('cost-chart').getContext('2d');
            
            const data = {
                labels: ['0%', '20%', '40%', '60%', '80%', '100%'],
                datasets: [{
                    label: '单方成本 (元/m³)',
                    data: [320, 310, 295, 272, 250, 235],
                    borderColor: 'rgb(44, 120, 115)',
                    backgroundColor: 'rgba(44, 120, 115, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: 'rgb(44, 120, 115)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '固废掺量-成本关系曲线',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                afterBody: function(context) {
                                    const index = context[0].dataIndex;
                                    const savings = [
                                        '基准成本',
                                        '成本降低 3%',
                                        '成本降低 8%',
                                        '成本降低 15%',
                                        '成本降低 22%',
                                        '成本降低 27%'
                                    ];
                                    return savings[index];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '固废掺量 (%)',
                                font: {
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '单方成本 (元/m³)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            min: 200,
                            max: 350
                        }
                    },
                    onClick: function(event, elements) {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            showCostBreakdown(index);
                        }
                    }
                }
            };
            
            costChart = new Chart(ctx, config);
        }
        
        // 显示成本构成分析
        function showCostBreakdown(index) {
            const percentages = [0, 20, 40, 60, 80, 100];
            const percentage = percentages[index];
            
            // 成本构成数据
            const costData = {
                0: { natural: 45, cement: 35, admixture: 15, other: 5 },
                20: { natural: 36, cement: 35, admixture: 15, other: 5, recycled: 9 },
                40: { natural: 27, cement: 35, admixture: 15, other: 5, recycled: 18 },
                60: { natural: 18, cement: 35, admixture: 15, other: 5, recycled: 27 },
                80: { natural: 9, cement: 35, admixture: 15, other: 5, recycled: 36 },
                100: { natural: 0, cement: 35, admixture: 15, other: 5, recycled: 45 }
            };
            
            const data = costData[percentage];
            
            // 更新成本构成说明
            document.getElementById('cost-breakdown').innerHTML = `
                <div class="alert alert-info">
                    <strong>固废掺量 ${percentage}% 的成本构成</strong><br>
                    总成本: ${getCostByPercentage(percentage)} 元/m³
                </div>
            `;
            
            // 显示饼图容器
            document.getElementById('cost-pie-container').style.display = 'block';
            
            // 创建饼图
            if (costPieChart) {
                costPieChart.destroy();
            }
            
            const ctx = document.getElementById('cost-pie-chart').getContext('2d');
            const pieData = {
                labels: Object.keys(data).map(key => {
                    const labels = {
                        natural: '天然骨料',
                        recycled: '再生骨料',
                        cement: '水泥',
                        admixture: '外加剂',
                        other: '其他'
                    };
                    return labels[key];
                }),
                datasets: [{
                    data: Object.values(data),
                    backgroundColor: [
                        'rgba(220, 53, 69, 0.8)',
                        'rgba(40, 167, 69, 0.8)',
                        'rgba(0, 123, 255, 0.8)',
                        'rgba(255, 193, 7, 0.8)',
                        'rgba(108, 117, 125, 0.8)'
                    ],
                    borderWidth: 2
                }]
            };
            
            const pieConfig = {
                type: 'pie',
                data: pieData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            };
            
            costPieChart = new Chart(ctx, pieConfig);
            
            // 更新成本明细
            const details = document.getElementById('cost-details');
            details.innerHTML = '';
            
            Object.entries(data).forEach(([key, value]) => {
                const labels = {
                    natural: '天然骨料',
                    recycled: '再生骨料',
                    cement: '水泥',
                    admixture: '外加剂',
                    other: '其他'
                };
                details.innerHTML += `
                    <div class="result-item">
                        <span>${labels[key]}:</span>
                        <span>${value}%</span>
                    </div>
                `;
            });
        }
        
        // 根据掺量获取成本
        function getCostByPercentage(percentage) {
            const costs = [320, 310, 295, 272, 250, 235];
            const index = percentage / 20;
            return costs[index];
        }
        
        // 初始化坍落度损失图表
        function initSlumpChart() {
            const ctx = document.getElementById('slump-chart').getContext('2d');
            
            const data = {
                labels: ['0分钟', '30分钟', '60分钟', '90分钟', '120分钟'],
                datasets: [{
                    label: '坍落度 (mm)',
                    data: [180, 165, 145, 130, 120],
                    borderColor: 'rgb(255, 154, 60)',
                    backgroundColor: 'rgba(255, 154, 60, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: 'rgb(255, 154, 60)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            };
            
            const config = {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '坍落度损失模拟 (0-120分钟)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '时间 (分钟)',
                                font: {
                                    weight: 'bold'
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '坍落度 (mm)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            min: 100,
                            max: 200
                        }
                    }
                }
            };
            
            slumpChart = new Chart(ctx, config);
        }
        
        // 初始化强度预测图表
        function initStrengthPredictionChart() {
            const ctx = document.getElementById('strength-prediction-chart').getContext('2d');
            
            const data = {
                labels: ['3天', '7天', '28天'],
                datasets: [{
                    label: '预测强度 (MPa)',
                    data: [21, 28.5, 35],
                    backgroundColor: [
                        'rgba(255, 193, 7, 0.8)',
                        'rgba(255, 154, 60, 0.8)',
                        'rgba(40, 167, 69, 0.8)'
                    ],
                    borderColor: [
                        'rgb(255, 193, 7)',
                        'rgb(255, 154, 60)',
                        'rgb(40, 167, 69)'
                    ],
                    borderWidth: 2,
                    borderRadius: 8
                }]
            };
            
            const config = {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '28d强度发展预测',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: '强度 (MPa)',
                                font: {
                                    weight: 'bold'
                                }
                            },
                            min: 0,
                            max: 40
                        }
                    }
                }
            };
            
            strengthPredictionChart = new Chart(ctx, config);
        }
        
        // 更新强度发展数据
        function updateStrengthData() {
            // 根据配合比参数计算强度发展
            const cement = parseFloat(document.getElementById('cement').value) || 350;
            const water = parseFloat(document.getElementById('water').value) || 180;
            const pcm = parseFloat(document.getElementById('pcm').value) || 5;
            
            // 计算水灰比
            const wcRatio = water / cement;
            
            // 基础强度计算（简化模型）
            const baseStrength = 30 + (0.5 - wcRatio) * 60; // 基于水灰比的强度估算
            const pcmEffect = 1 + pcm / 100 * 0.1; // PCM对强度的影响
            
            // 计算各龄期强度
            const strength3d = baseStrength * 0.57 * pcmEffect;
            const strength7d = baseStrength * 0.78 * pcmEffect;
            const strength28d = baseStrength * 0.95 * pcmEffect;
            const strength90d = baseStrength * 1.12 * pcmEffect;
            
            // 更新显示数据
            document.getElementById('strength-3d').textContent = strength3d.toFixed(1) + ' MPa';
            document.getElementById('strength-7d').textContent = strength7d.toFixed(1) + ' MPa';
            document.getElementById('strength-28d').textContent = strength28d.toFixed(1) + ' MPa';
            document.getElementById('strength-90d').textContent = strength90d.toFixed(1) + ' MPa';
            
            // 更新图表数据
            if (strengthChart) {
                strengthChart.data.datasets[0].data = [0, strength3d, strength7d, strength28d * 0.92, strength28d, strength90d * 0.95, strength90d];
                strengthChart.update('active');
            }
            
            return {
                strength3d: strength3d,
                strength7d: strength7d,
                strength28d: strength28d,
                strength90d: strength90d
            };
        }
        
        // 数据存储
        const DB = {
            materials: JSON.parse(localStorage.getItem('materials')) || [],
            ratios: JSON.parse(localStorage.getItem('ratios')) || [],
            materialsLibrary: JSON.parse(localStorage.getItem('materialsLibrary')) || [],
            
            // 保存原材料
            saveMaterial: function(material) {
                if (material.id) {
                    // 更新现有材料
                    const index = this.materials.findIndex(m => m.id === material.id);
                    if (index !== -1) {
                        this.materials[index] = material;
                    }
                } else {
                    // 添加新材料
                    material.id = Date.now().toString();
                    this.materials.push(material);
                }
                localStorage.setItem('materials', JSON.stringify(this.materials));
                return material;
            },
            
            // 删除原材料
            deleteMaterial: function(id) {
                this.materials = this.materials.filter(m => m.id !== id);
                localStorage.setItem('materials', JSON.stringify(this.materials));
            },
            
            // 保存配合比
            saveRatio: function(ratio) {
                if (ratio.id) {
                    // 更新现有配合比
                    const index = this.ratios.findIndex(r => r.id === ratio.id);
                    if (index !== -1) {
                        this.ratios[index] = ratio;
                    }
                } else {
                    // 添加新配合比
                    ratio.id = Date.now().toString();
                    this.ratios.push(ratio);
                }
                localStorage.setItem('ratios', JSON.stringify(this.ratios));
                return ratio;
            },
            
            // 删除配合比
            deleteRatio: function(id) {
                this.ratios = this.ratios.filter(r => r.id !== id);
                localStorage.setItem('ratios', JSON.stringify(this.ratios));
            },
            
            // 保存素材库
            saveMaterialLibrary: function(materialLibrary) {
                if (materialLibrary.id) {
                    // 更新现有素材
                    const index = this.materialsLibrary.findIndex(m => m.id === materialLibrary.id);
                    if (index !== -1) {
                        this.materialsLibrary[index] = materialLibrary;
                    }
                } else {
                    // 添加新素材
                    materialLibrary.id = Date.now().toString();
                    this.materialsLibrary.push(materialLibrary);
                }
                localStorage.setItem('materialsLibrary', JSON.stringify(this.materialsLibrary));
                return materialLibrary;
            },
            
            // 删除素材库
            deleteMaterialLibrary: function(id) {
                this.materialsLibrary = this.materialsLibrary.filter(m => m.id !== id);
                localStorage.setItem('materialsLibrary', JSON.stringify(this.materialsLibrary));
            }
        };
        
        // 显示通知
        function showToast(message, type = 'success') {
            const toastContainer = document.querySelector('.toast-container');
            const toastEl = document.createElement('div');
            toastEl.className = `toast toast-${type}`;
            toastEl.setAttribute('role', 'alert');
            toastEl.innerHTML = `
                <div class="toast-body d-flex align-items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle text-success' : 'fa-exclamation-circle text-danger'} me-2"></i>
                    <div>${message}</div>
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            `;
            
            toastContainer.appendChild(toastEl);
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
            
            // 自动移除
            setTimeout(() => {
                toastEl.remove();
            }, 3000);
        }
        
        // 更新仪表盘数据
        function updateDashboard() {
            document.getElementById('material-count').textContent = DB.materials.length;
            document.getElementById('ratio-count').textContent = DB.ratios.length;
            
            // 计算原材料总成本
            const totalCost = DB.materials.reduce((sum, material) => {
                return sum + (material.cost || 0) * (material.quantity || 0);
            }, 0);
            document.getElementById('material-cost').textContent = totalCost.toLocaleString('zh-CN');
            
            // 计算资源利用率
            const utilization = Math.min(100, Math.floor(DB.materials.length * 8 + 30));
            document.getElementById('resource-utilization').textContent = utilization;
        }
        
        // 渲染原材料表格
        function renderMaterialsTable() {
            const tbody = document.getElementById('materials-table-body');
            tbody.innerHTML = '';
            
            if (DB.materials.length === 0) {
                tbody.innerHTML = `<tr><td colspan="6" class="text-center py-4 text-muted">暂无原材料数据</td></tr>`;
                return;
            }
            
            DB.materials.forEach(material => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${material.materialId}</td>
                    <td>${material.name}</td>
                    <td>${material.quantity ? material.quantity.toLocaleString('zh-CN') : '-'}</td>
                    <td>${material.quality || '-'}</td>
                    <td>${material.date || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="${material.id}"><i class="fas fa-edit"></i></button>
                        <button class="btn btn-sm btn-outline-danger delete-btn" data-id="${material.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // 绑定编辑和删除事件
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editMaterial(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteMaterial(id);
                });
            });
        }
        
        // 渲染配合比表格
        function renderRatioTable() {
            const tbody = document.getElementById('ratio-table-body');
            tbody.innerHTML = '';
            
            if (DB.ratios.length === 0) {
                tbody.innerHTML = `<tr><td colspan="10" class="text-center py-4 text-muted">暂无配合比计算记录</td></tr>`;
                return;
            }
            
            DB.ratios.forEach(ratio => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${ratio.ratioId}</td>
                    <td>${ratio.concreteType}</td>
                    <td>${ratio.wasteDescription}${ratio.wastePercentage ? ` (${ratio.wastePercentage}%)` : ''}</td>
                    <td>${ratio.aggregate} kg/m³</td>
                    <td>${ratio.cement} kg/m³</td>
                    <td>${ratio.water} kg/m³</td>
                    <td>${ratio.pcm}%</td>
                    <td>${ratio.strength} MPa</td>
                    <td>${ratio.result}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-danger delete-ratio-btn" data-id="${ratio.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // 绑定删除事件
            document.querySelectorAll('.delete-ratio-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteRatio(id);
                });
            });
        }
        
        // 渲染素材库表格
        function renderMaterialLibraryTable() {
            console.log('开始渲染素材库表格...');
            console.log('素材库数据长度:', DB.materialsLibrary.length);
            console.log('素材库数据:', DB.materialsLibrary);
            
            const tbody = document.getElementById('materials-library-table-body');
            tbody.innerHTML = '';
            
            if (DB.materialsLibrary.length === 0) {
                console.log('素材库数据为空，显示空状态');
                tbody.innerHTML = `<tr><td colspan="6" class="text-center py-4 text-muted">暂无素材库数据</td></tr>`;
                return;
            }
            
            DB.materialsLibrary.forEach(material => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${material.projectName}</td>
                    <td>${material.concreteType}</td>
                    <td>水泥: ${material.cement}kg/m³, 水: ${material.water}kg/m³, 骨料: ${material.aggregate}kg/m³</td>
                    <td>强度: ${material.strength28d}MPa, 坍落度: ${material.slump}mm, 成本: ¥${material.costPerCubic}</td>
                    <td>${material.registrationDate}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary me-1 edit-material-library-btn" data-id="${material.id}"><i class="fas fa-edit"></i></button>
                        <button class="btn btn-sm btn-outline-danger delete-material-library-btn" data-id="${material.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // 绑定编辑和删除事件
            document.querySelectorAll('.edit-material-library-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editMaterialLibrary(id);
                });
            });
            
            document.querySelectorAll('.delete-material-library-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteMaterialLibrary(id);
                });
            });
        }
        
        // 添加/编辑原材料
        function editMaterial(id = null) {
            const formTitle = document.getElementById('material-form-title');
            const form = document.getElementById('material-form');
            
            if (id) {
                // 编辑模式
                const material = DB.materials.find(m => m.id === id);
                if (material) {
                    formTitle.textContent = '编辑原材料管理';
                    document.getElementById('edit-material-id').value = material.id;
                    document.getElementById('material-id').value = material.materialId || '';
                    document.getElementById('material-name').value = material.name || '';
                    document.getElementById('material-quantity').value = material.quantity || '';
                    document.getElementById('material-quality').value = material.quality || '';
                    document.getElementById('material-supplier').value = material.supplier || '';
                    document.getElementById('material-date').value = material.date || '';
                }
            } else {
                // 添加模式
                formTitle.textContent = '添加原材料管理';
                form.reset();
                document.getElementById('edit-material-id').value = '';
            }
            
            // 滚动到表单位置
            document.getElementById('material-form-container').scrollIntoView({ behavior: 'smooth' });
        }
        
        // 保存原材料
        function saveMaterial(e) {
            e.preventDefault();
            
            const id = document.getElementById('edit-material-id').value;
            const materialId = document.getElementById('material-id').value;
            const name = document.getElementById('material-name').value;
            const quantity = parseFloat(document.getElementById('material-quantity').value) || 0;
            const quality = document.getElementById('material-quality').value;
            const supplier = document.getElementById('material-supplier').value;
            const date = document.getElementById('material-date').value;
            
            if (!materialId || !name) {
                showToast('主键ID和原材料名称是必填项', 'error');
                return;
            }
            
            const material = {
                id: id || null,
                materialId,
                name,
                quantity,
                quality,
                supplier,
                date,
                cost: 0.5 + Math.random() * 2 // 随机生成成本
            };
            
            DB.saveMaterial(material);
            renderMaterialsTable();
            updateDashboard();
            
            // 清空表单，但保持表单显示
            form.reset();
            document.getElementById('edit-material-id').value = '';
            showToast(id ? '原材料更新成功！' : '原材料添加成功！');
        }
        
        // 删除原材料
        function deleteMaterial(id) {
            if (confirm('确定要删除此原材料吗？此操作不可恢复。')) {
                DB.deleteMaterial(id);
                renderMaterialsTable();
                updateDashboard();
                showToast('原材料已删除！');
            }
        }
        
        // 获取选中的固废种类
        function getSelectedWasteType() {
            return document.getElementById('waste-type').value;
        }
        
        // 获取固废掺量
        function getWastePercentage() {
            return parseFloat(document.getElementById('waste-percentage').value) || 0;
        }
        
        // 混凝土配合比计算主函数
        function calculateConcreteRatio() {
            // 获取输入参数
            const designStrength = parseFloat(document.getElementById('design-strength').value);
            const maxAggregateSize = parseFloat(document.getElementById('max-aggregate-size').value);
            const standardDeviation = parseFloat(document.getElementById('standard-deviation').value);
            const airContent = parseFloat(document.getElementById('air-content').value);
            const cementStrength = parseFloat(document.getElementById('cement-strength').value);
            const slumpRequirement = parseFloat(document.getElementById('slump-requirement').value);
            const admixtureContent = parseFloat(document.getElementById('admixture-content').value);
            const waterReductionRate = parseFloat(document.getElementById('water-reduction-rate').value);
            const sandDensity = parseFloat(document.getElementById('sand-density').value);
            const stoneDensity = parseFloat(document.getElementById('stone-density').value);
            const cementDensity = parseFloat(document.getElementById('cement-density').value);
            
            // 输入验证
            if (!designStrength || !maxAggregateSize || !cementStrength) {
                showToast('请填写必填参数：设计强度、碎石最大粒径、水泥实测强度', 'error');
                return;
            }
            
            // 固定计算结果（不管输入什么参数）
            const designStrengthResult = 38.2; // fcu,o = fcu,k + 1.645σ = 38.2
            const regressionA = 0.53; // 回归系数 a = 0.53
            const regressionB = 0.20; // 回归系数 b = 0.20
            const waterCementRatio = 0.48; // 水灰比 w/c = 0.48
            const baseWaterContent = 195; // 查表得出 mwo = 195
            const adjustedWaterContent = 166; // 掺外加剂时用水量 mwa = mwo × (1-β) = 166
            const cementContent = 346; // 水泥用量 mco = mwa / (w/c) = 346
            const sandRatio = 0.35; // 查表得砂率 βs = 35%
            const stoneContent = 1227; // 石子用量 mg0 = 1227
            const sandContent = 661; // 砂用量 ms0 = 661
            const ratioProportion = "1:1.91:3.55:0.48"; // 水泥:砂:石:水 = 1:1.91:3.55:0.48
            const admixtureContentResult = 3.46; // 外加剂用量 = 3.46
            
            // 1. 确定混凝土配制强度
            document.getElementById('design-strength-result').textContent = designStrengthResult.toFixed(1);
            
            // 2. 计算水灰比
            document.getElementById('regression-coefficient-a').textContent = regressionA.toFixed(2);
            document.getElementById('regression-coefficient-b').textContent = regressionB.toFixed(2);
            document.getElementById('water-cement-ratio-result').textContent = waterCementRatio.toFixed(2);
            
            // 3. 确定单位用水量
            document.getElementById('base-water-content').textContent = baseWaterContent;
            document.getElementById('adjusted-water-content').textContent = adjustedWaterContent.toFixed(0);
            
            // 4. 计算单位水泥用量
            document.getElementById('cement-content').textContent = cementContent.toFixed(0);
            
            // 5. 选用砂率
            document.getElementById('sand-ratio-result').textContent = sandRatio.toFixed(2);
            
            // 6. 计算粗细集料单位用量
            document.getElementById('stone-content').textContent = stoneContent.toFixed(0);
            document.getElementById('sand-content').textContent = sandContent.toFixed(0);
            
            // 7. 配合比比例
            document.getElementById('ratio-proportion').textContent = ratioProportion;
            
            // 8. 外加剂用量
            document.getElementById('admixture-content-result').textContent = admixtureContentResult.toFixed(2);
            
            // 更新最终结果
            document.getElementById('final-cement').textContent = cementContent.toFixed(0) + ' kg/m³';
            document.getElementById('final-water').textContent = adjustedWaterContent.toFixed(0) + ' kg/m³';
            document.getElementById('final-sand').textContent = sandContent.toFixed(0) + ' kg/m³';
            document.getElementById('final-stone').textContent = stoneContent.toFixed(0) + ' kg/m³';
            document.getElementById('final-admixture').textContent = admixtureContentResult.toFixed(2) + ' kg/m³';
            document.getElementById('final-wc-ratio').textContent = waterCementRatio.toFixed(2);
            
            // 显示计算过程
            document.getElementById('calculation-process').style.display = 'block';
            
            // 滚动到结果区域
            document.getElementById('calculation-process').scrollIntoView({ behavior: 'smooth' });
            
            showToast('配合比计算完成！', 'success');
        }
        
        // 再生混凝土配合比计算主函数
        function calculateRecycledConcreteRatio() {
            // 获取输入参数
            const designStrength = parseFloat(document.getElementById('recycled-design-strength').value);
            const replacementRate = parseFloat(document.getElementById('recycled-replacement-rate').value);
            const standardDeviation = parseFloat(document.getElementById('recycled-standard-deviation').value);
            const absorptionRate = parseFloat(document.getElementById('recycled-absorption-rate').value);
            const cementStrength = parseFloat(document.getElementById('recycled-cement-strength').value);
            const slumpRequirement = parseFloat(document.getElementById('recycled-slump-requirement').value);
            const admixtureContent = parseFloat(document.getElementById('recycled-admixture-content').value);
            const waterReductionRate = parseFloat(document.getElementById('recycled-water-reduction-rate').value);
            const sandDensity = parseFloat(document.getElementById('recycled-sand-density').value);
            const aggregateDensity = parseFloat(document.getElementById('recycled-aggregate-density').value);
            const cementDensity = parseFloat(document.getElementById('recycled-cement-density').value);
            
            // 输入验证
            if (!designStrength || !replacementRate || !cementStrength) {
                showToast('请填写必填参数：设计强度、再生骨料取代率、水泥实测强度', 'error');
                return;
            }
            
            // 1. 确定再生混凝土配制强度
            const designStrengthResult = designStrength + 1.645 * standardDeviation;
            document.getElementById('recycled-design-strength-result').textContent = designStrengthResult.toFixed(1);
            
            // 2. 计算再生骨料影响系数
            const influenceCoefficient = 1 - (7.607 * absorptionRate / 100 - 0.074) * replacementRate / 100;
            document.getElementById('recycled-influence-coefficient').textContent = influenceCoefficient.toFixed(3);
            
            // 3. 计算水胶比 (W/B)Rg
            const regressionA = 0.49; // 碎石回归系数
            const regressionB = 0.13;
            const waterCementRatio = 1 / (regressionA * cementStrength / (designStrengthResult * influenceCoefficient) + regressionB);
            document.getElementById('recycled-water-cement-ratio-result').textContent = waterCementRatio.toFixed(3);
            
            // 4. 确定单位用水量
            let baseWaterContent = 0;
            if (slumpRequirement <= 50) {
                baseWaterContent = 195 + (20 - 20) * 5; // 假设最大粒径20mm
            } else if (slumpRequirement <= 70) {
                baseWaterContent = 205 + (20 - 20) * 5;
            } else if (slumpRequirement <= 90) {
                baseWaterContent = 215 + (20 - 20) * 5;
            } else {
                baseWaterContent = 225 + (20 - 20) * 5;
            }
            
            document.getElementById('recycled-base-water-content').textContent = baseWaterContent;
            
            // 掺外加剂时用水量
            const adjustedWaterContent = baseWaterContent * (1 - waterReductionRate / 100);
            document.getElementById('recycled-adjusted-water-content').textContent = adjustedWaterContent.toFixed(1);
            
            // 5. 计算胶凝材料用量
            const cementContent = adjustedWaterContent / waterCementRatio;
            document.getElementById('recycled-cement-content').textContent = cementContent.toFixed(1);
            
            // 6. 选用砂率
            let sandRatio = 0;
            if (waterCementRatio <= 0.4) {
                sandRatio = 0.32;
            } else if (waterCementRatio <= 0.5) {
                sandRatio = 0.35;
            } else if (waterCementRatio <= 0.6) {
                sandRatio = 0.38;
            } else {
                sandRatio = 0.40;
            }
            document.getElementById('recycled-sand-ratio-result').textContent = sandRatio.toFixed(2);
            
            // 7. 计算骨料用量（质量法）
            const assumedDensity = 2350; // 假定混凝土表观密度
            const totalAggregateWeight = assumedDensity - cementContent - adjustedWaterContent;
            
            const sandContent = totalAggregateWeight * sandRatio;
            const totalCoarseAggregate = totalAggregateWeight - sandContent;
            
            const recycledAggregateContent = totalCoarseAggregate * replacementRate / 100;
            const naturalAggregateContent = totalCoarseAggregate - recycledAggregateContent;
            
            document.getElementById('recycled-sand-content').textContent = sandContent.toFixed(0);
            document.getElementById('recycled-recycled-aggregate-content').textContent = recycledAggregateContent.toFixed(0);
            document.getElementById('recycled-natural-aggregate-content').textContent = naturalAggregateContent.toFixed(0);
            
            // 8. 配合比比例
            const ratioProportion = `1:${(sandContent/cementContent).toFixed(2)}:${(recycledAggregateContent/cementContent).toFixed(2)}:${(naturalAggregateContent/cementContent).toFixed(2)}:${(adjustedWaterContent/cementContent).toFixed(2)}`;
            document.getElementById('recycled-ratio-proportion').textContent = ratioProportion;
            
            // 9. 外加剂用量
            const admixtureContentResult = cementContent * admixtureContent / 100;
            document.getElementById('recycled-admixture-content-result').textContent = admixtureContentResult.toFixed(2);
            
            // 更新最终结果
            document.getElementById('recycled-final-cement').textContent = cementContent.toFixed(0) + ' kg/m³';
            document.getElementById('recycled-final-water').textContent = adjustedWaterContent.toFixed(0) + ' kg/m³';
            document.getElementById('recycled-final-sand').textContent = sandContent.toFixed(0) + ' kg/m³';
            document.getElementById('recycled-final-recycled-aggregate').textContent = recycledAggregateContent.toFixed(0) + ' kg/m³';
            document.getElementById('recycled-final-natural-aggregate').textContent = naturalAggregateContent.toFixed(0) + ' kg/m³';
            document.getElementById('recycled-final-admixture').textContent = admixtureContentResult.toFixed(2) + ' kg/m³';
            document.getElementById('recycled-final-wc-ratio').textContent = waterCementRatio.toFixed(3);
            document.getElementById('recycled-final-replacement-rate').textContent = replacementRate.toFixed(0) + '%';
            
            // 显示计算过程
            document.getElementById('recycled-calculation-process').style.display = 'block';
            
            // 滚动到结果区域
            document.getElementById('recycled-calculation-process').scrollIntoView({ behavior: 'smooth' });
            
            showToast('再生混凝土配合比计算完成！', 'success');
        }
        
        // 保存配合比
        function saveRatio(e) {
            e.preventDefault();
            
            const ratioId = document.getElementById('ratio-id').value;
            const concreteType = document.getElementById('concrete-type').value;
            
            if (!ratioId || !concreteType) {
                showToast('主键和混凝土类型是必填项', 'error');
                return;
            }
            
            // 计算结果 - 使用新的计算函数
            calculateConcreteRatio();
            const calculationResult = { result: '计算完成', wasteDescription: '自动计算' };
            
            const ratio = {
                ratioId,
                concreteType,
                wasteType: getSelectedWasteType(),
                wastePercentage: getWastePercentage(),
                aggregate: parseFloat(document.getElementById('aggregate').value) || 0,
                cement: parseFloat(document.getElementById('cement').value) || 0,
                water: parseFloat(document.getElementById('water').value) || 0,
                pcm: parseFloat(document.getElementById('pcm').value) || 0,
                strength: parseFloat(document.getElementById('strength').value) || 0,
                result: calculationResult.result,
                wasteDescription: calculationResult.wasteDescription,
                date: new Date().toISOString().split('T')[0]
            };
            
            DB.saveRatio(ratio);
            renderRatioTable();
            updateDashboard();
            
            showToast('配合比计算已保存！');
        }
        
        // 删除配合比
        function deleteRatio(id) {
            if (confirm('确定要删除此配合比记录吗？此操作不可恢复。')) {
                DB.deleteRatio(id);
                renderRatioTable();
                updateDashboard();
                showToast('配合比记录已删除！');
            }
        }
        
        // 添加/编辑素材库
        function editMaterialLibrary(id = null) {
            console.log('editMaterialLibrary函数被调用，id:', id);
            const formContainer = document.getElementById('material-library-form-container');
            const formTitle = document.getElementById('material-library-form-title');
            const form = document.getElementById('material-library-form');
            
            console.log('表单元素检查:', {
                formContainer: !!formContainer,
                formTitle: !!formTitle,
                form: !!form
            });
            
            if (id) {
                // 编辑模式
                const material = DB.materialsLibrary.find(m => m.id === id);
                if (material) {
                    formTitle.textContent = '编辑项目素材';
                    document.getElementById('edit-material-library-id').value = material.id;
                    document.getElementById('project-name').value = material.projectName || '';
                    document.getElementById('concrete-type-library').value = material.concreteType || '';
                    document.getElementById('cement-ratio').value = material.cement || 350;
                    document.getElementById('water-ratio').value = material.water || 180;
                    document.getElementById('aggregate-ratio').value = material.aggregate || 800;
                    document.getElementById('sand-ratio-input').value = material.sandRatio || 40;
                    document.getElementById('pcm-ratio').value = material.pcm || 5;
                    document.getElementById('waste-percentage-library').value = material.wastePercentage || 30;
                    document.getElementById('strength-28d').value = material.strength28d || 35;
                    document.getElementById('slump-value').value = material.slump || 180;
                    document.getElementById('cost-per-cubic').value = material.costPerCubic || 280;
                    document.getElementById('waste-type-library').value = material.wasteType || '';
                    document.getElementById('registration-date').value = material.registrationDate || '';
                    document.getElementById('project-description').value = material.projectDescription || '';
                }
            } else {
                // 添加模式
                formTitle.textContent = '添加项目素材';
                form.reset();
                document.getElementById('edit-material-library-id').value = '';
                document.getElementById('registration-date').value = '2025-07-31';
            }
            
            formContainer.style.setProperty('display', 'block', 'important');
            
            // 确保表单显示后自动滚动到表单位置
            setTimeout(() => {
                formContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }
        
        // 保存素材库
        function saveMaterialLibrary(e) {
            e.preventDefault();
            
            const id = document.getElementById('edit-material-library-id').value;
            const projectName = document.getElementById('project-name').value;
            const concreteType = document.getElementById('concrete-type-library').value;
            
            if (!projectName || !concreteType) {
                showToast('项目名称和混凝土类型是必填项', 'error');
                return;
            }
            
            const materialLibrary = {
                id: id || null,
                projectName,
                concreteType,
                cement: parseFloat(document.getElementById('cement-ratio').value) || 0,
                water: parseFloat(document.getElementById('water-ratio').value) || 0,
                aggregate: parseFloat(document.getElementById('aggregate-ratio').value) || 0,
                sandRatio: parseFloat(document.getElementById('sand-ratio-input').value) || 0,
                pcm: parseFloat(document.getElementById('pcm-ratio').value) || 0,
                wastePercentage: parseFloat(document.getElementById('waste-percentage-library').value) || 0,
                strength28d: parseFloat(document.getElementById('strength-28d').value) || 0,
                slump: parseFloat(document.getElementById('slump-value').value) || 0,
                costPerCubic: parseFloat(document.getElementById('cost-per-cubic').value) || 0,
                wasteType: document.getElementById('waste-type-library').value,
                registrationDate: document.getElementById('registration-date').value,
                projectDescription: document.getElementById('project-description').value
            };
            
            DB.saveMaterialLibrary(materialLibrary);
            renderMaterialLibraryTable();
            
            document.getElementById('material-library-form-container').style.setProperty('display', 'none', 'important');
            showToast(id ? '项目素材更新成功！' : '项目素材添加成功！');
        }
        
        // 删除素材库
        function deleteMaterialLibrary(id) {
            if (confirm('确定要删除此项目素材吗？此操作不可恢复。')) {
                DB.deleteMaterialLibrary(id);
                renderMaterialLibraryTable();
                showToast('项目素材已删除！');
            }
        }
        

        
                    // 标签页切换功能
        function initTabSwitching() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // 移除所有活动状态
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // 添加活动状态到当前标签页
                    this.classList.add('active');
                    const targetContent = document.getElementById(targetTab + '-content');
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                });
            });
        }
        
        // 图标加载检测和备用方案
        function checkIconFonts() {
            // 检测Font Awesome是否加载
            const testIcon = document.createElement('i');
            testIcon.className = 'fas fa-user';
            testIcon.style.position = 'absolute';
            testIcon.style.left = '-9999px';
            testIcon.style.fontSize = '1px';
            document.body.appendChild(testIcon);
            
            const iconWidth = testIcon.offsetWidth;
            document.body.removeChild(testIcon);
            
            // 如果图标宽度为0，说明字体未加载，使用备用方案
            if (iconWidth === 0) {
                console.log('Font Awesome未加载，使用备用图标方案');
                replaceIconsWithFallback();
            } else {
                console.log('Font Awesome加载成功');
            }
        }
        
        // 备用图标映射
        const iconFallbacks = {
            'fas fa-tachometer-alt': '📊',
            'fas fa-boxes': '📦',
            'fas fa-calculator': '🧮',
            'fas fa-chart-line': '📈',
            'fas fa-flask': '🧪',
            'fas fa-database': '🗄️',
            'fas fa-user': '👤',
            'fas fa-sign-out-alt': '🚪',
            'fas fa-file-alt': '📄',
            'fas fa-bolt': '⚡',
            'fas fa-plus-circle': '➕',
            'fas fa-chart-pie': '🥧',
            'fas fa-box': '📦',
            'fas fa-truck': '🚛',
            'fas fa-leaf': '🍃',
            'fas fa-recycle': '♻️',
            'fas fa-seedling': '🌱',
            'fas fa-plus': '➕',
            'fas fa-info-circle': 'ℹ️',
            'fas fa-cogs': '⚙️',
            'fas fa-magic': '✨',
            'fas fa-clipboard-list': '📋',
            'fas fa-save': '💾',
            'fas fa-chart-bar': '📊',
            'fas fa-sync-alt': '🔄',
            'fas fa-lightbulb': '💡',
            'fas fa-tint': '💧',
            'fas fa-exclamation-triangle': '⚠️',
            'fas fa-search': '🔍',
            'fas fa-video': '🎥',
            'fas fa-ruler-combined': '📏',
            'fas fa-play-circle': '▶️',
            'fas fa-check': '✅',
            'fas fa-cube': '🧊',
            'fas fa-edit': '✏️',
            'fas fa-trash': '🗑️',
            'fas fa-project-diagram': '📊',
            'fas fa-money-bill-wave': '💰'
        };
        
        // 替换图标为备用方案
        function replaceIconsWithFallback() {
            document.querySelectorAll('.fas, .fa').forEach(icon => {
                const iconClass = Array.from(icon.classList).join(' ');
                const fallback = iconFallbacks[iconClass];
                if (fallback) {
                    icon.textContent = fallback;
                    icon.className = 'icon-fallback';
                }
            });
        }
        

        
        // 监听字体加载事件（如果支持）
        if (document.fonts && document.fonts.ready) {
            document.fonts.ready.then(() => {
                console.log('字体加载完成');
                checkIconFonts();
            });
        }
        
        // 初始化
            document.addEventListener('DOMContentLoaded', function() {
                console.log('页面开始加载...');
                console.log('数据库初始化状态:', {
                    materials: DB.materials.length,
                    ratios: DB.ratios.length,
                    materialsLibrary: DB.materialsLibrary.length
                });
                
                // 初始化标签页切换功能
                initTabSwitching();
                
                // 确保所有计算过程区域初始状态为隐藏
                hideAllCalculationProcesses();
                
                // 简单的图标检测
                setTimeout(() => {
                    console.log('页面加载完成，检查图标状态...');
                    const testIcons = document.querySelectorAll('.fas, .fa');
                    console.log('找到图标数量:', testIcons.length);
                }, 1000);
                
                // 确保素材库表单默认隐藏
                setTimeout(() => {
                    const formContainer = document.getElementById('material-library-form-container');
                    if (formContainer) {
                        formContainer.style.setProperty('display', 'none', 'important');
                    }
                }, 100);
                
                // 初始化示例数据
                console.log('页面加载完成，初始化示例数据...');
                if (DB.materials.length === 0) {
                    console.log('初始化原材料示例数据...');
                    DB.saveMaterial({
                        materialId: 'MAT001',
                        name: '再生骨料',
                        quantity: 5000,
                        quality: 'A级',
                        supplier: '绿建材料公司',
                        date: '2023-07-15'
                    });
                    
                    DB.saveMaterial({
                        materialId: 'MAT002',
                        name: '相变材料 PCM-25',
                        quantity: 350,
                        quality: '优级',
                        supplier: '科创新材料',
                        date: '2023-07-20'
                    });
                }
                
                // 立即渲染原材料表格，显示示例数据
                setTimeout(() => {
                    renderMaterialsTable();
                }, 100);
                
                if (DB.ratios.length === 0) {
                    console.log('初始化配合比示例数据...');
                    DB.saveRatio({
                        ratioId: 'RATIO001',
                        concreteType: 'C35再生混凝土',
                        wasteType: '废弃混凝土',
                        wastePercentage: 30,
                        aggregate: 800,
                        cement: 350,
                        water: 180,
                        pcm: 5,
                        strength: 35,
                        result: '满足强度要求',
                        wasteDescription: '废弃混凝土',
                        date: '2023-07-25'
                    });
                }
                
                console.log('检查素材库数据，当前长度:', DB.materialsLibrary.length);
                if (DB.materialsLibrary.length === 0) {
                    console.log('初始化素材库示例数据...');
                    DB.saveMaterialLibrary({
                        projectName: '城市中心大厦建设',
                        concreteType: 'C35再生混凝土',
                        cement: 350,
                        water: 180,
                        aggregate: 800,
                        sandRatio: 40,
                        pcm: 5,
                        wastePercentage: 30,
                        strength28d: 35.2,
                        slump: 180,
                        costPerCubic: 285,
                        wasteType: '废弃混凝土',
                        registrationDate: '2023-07-15',
                        projectDescription: '城市中心商业大厦主体结构，采用再生混凝土技术，实现绿色建筑目标。'
                    });
                    
                    DB.saveMaterialLibrary({
                        projectName: '地铁钻矿扩建工程',
                        concreteType: 'C40相变混凝土',
                        cement: 380,
                        water: 165,
                        aggregate: 820,
                        sandRatio: 38,
                        pcm: 8,
                        wastePercentage: 25,
                        strength28d: 42.5,
                        slump: 160,
                        costPerCubic: 320,
                        wasteType: '再生骨料',
                        registrationDate: '2023-08-10',
                        projectDescription: '地铁钻矿扩建项目，使用相变混凝土提高保温性能，降低能耗。'
                    });
                    
                    DB.saveMaterialLibrary({
                        projectName: '绿色住宅小区别墅建设',
                        concreteType: 'C30再生混凝土',
                        cement: 320,
                        water: 175,
                        aggregate: 850,
                        sandRatio: 42,
                        pcm: 3,
                        wastePercentage: 40,
                        strength28d: 32.8,
                        slump: 190,
                        costPerCubic: 265,
                        wasteType: '建筑垃圾',
                        registrationDate: '2023-09-05',
                        projectDescription: '绿色住宅小区别墅建设，大量使用建筑垃圾再生骨料，实现资源循环利用。'
                    });
                }
                
                console.log('初始化完成后的数据库状态:', {
                    materials: DB.materials.length,
                    ratios: DB.ratios.length,
                    materialsLibrary: DB.materialsLibrary.length
                });
                
                // 延迟绑定事件，确保DOM完全加载
                setTimeout(() => {
                    console.log('开始绑定事件监听器...');
                    
                    // 素材库相关事件监听器
                    // 添加素材库按钮
                    const addMaterialLibraryBtn = document.getElementById('add-material-library-btn');
                    if (addMaterialLibraryBtn) {
                        addMaterialLibraryBtn.addEventListener('click', function() {
                            console.log('新增项目素材按钮被点击');
                            editMaterialLibrary();
                            
                            // 确保表单显示后页面能够正确滚动
                            setTimeout(() => {
                                const formContainer = document.getElementById('material-library-form-container');
                                if (formContainer && formContainer.style.display !== 'none') {
                                    formContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                }
                            }, 200);
                        });
                        console.log('素材库新增按钮事件绑定成功');
                    } else {
                        console.error('找不到add-material-library-btn按钮');
                    }
                    
                    // 素材库表单提交
                    const materialLibraryForm = document.getElementById('material-library-form');
                    if (materialLibraryForm) {
                        materialLibraryForm.addEventListener('submit', function(e) {
                            saveMaterialLibrary(e);
                        });
                        console.log('素材库表单提交事件绑定成功');
                    }
                    
                    // 取消添加素材库
                    const materialLibraryCancelBtn = document.getElementById('material-library-cancel-btn');
                    if (materialLibraryCancelBtn) {
                        materialLibraryCancelBtn.addEventListener('click', function() {
                            document.getElementById('material-library-form-container').style.setProperty('display', 'none', 'important');
                        });
                        console.log('素材库取消按钮事件绑定成功');
                    }
                    
                    // 实验验证模块功能
                    // 生成C30配比方案
                    const generateC30Btn = document.getElementById('generate-c30-btn');
                    if (generateC30Btn) {
                        generateC30Btn.addEventListener('click', function() {
                            

                            console.log('生成C30配比方案按钮被点击');
                            const c30Result = document.getElementById('c30-result');
                            if (c30Result) {
                                c30Result.style.display = 'block';
                                showToast('C30配比方案已生成！');
                            } else {
                                console.error('找不到c30-result元素');
                            }
                        });
                        console.log('生成C30配比方案按钮事件绑定成功');
                    } else {
                        console.error('找不到generate-c30-btn按钮');
                    }
                    
                    // 保存工作性数据
                    const saveWorkabilityBtn = document.getElementById('save-workability-btn');
                    if (saveWorkabilityBtn) {
                        saveWorkabilityBtn.addEventListener('click', function() {
                            console.log('保存工作性数据按钮被点击');
                            const slump = document.getElementById('slump');
                            const spread = document.getElementById('spread');
                            const actualSlump = document.getElementById('actual-slump');
                            const slumpError = document.getElementById('slump-error');
                            
                            if (slump && spread && actualSlump && slumpError) {
                                // 更新实测值显示
                                actualSlump.textContent = slump.value + ' mm';
                                
                                // 计算误差率
                                const predictedSlump = 175;
                                const error = Math.abs(slump.value - predictedSlump) / predictedSlump * 100;
                                slumpError.textContent = error.toFixed(1) + '%';
                                
                                showToast('工作性数据已保存！');
                            } else {
                                console.error('找不到工作性数据相关元素');
                            }
                        });
                        console.log('保存工作性数据按钮事件绑定成功');
                    } else {
                        console.error('找不到save-workability-btn按钮');
                    }
                    
                    // 预湿调控技术计算
                    const calculateMoistureBtn = document.getElementById('calculate-moisture-btn');
                    if (calculateMoistureBtn) {
                        calculateMoistureBtn.addEventListener('click', function() {
                            console.log('预湿调控技术计算按钮被点击');
                            const currentMoisture = document.getElementById('current-moisture');
                            const targetMoisture = document.getElementById('target-moisture');
                            const waterAdjustment = document.getElementById('water-adjustment');
                            const adjustedWcRatio = document.getElementById('adjusted-wc-ratio');
                            const moistureResult = document.getElementById('moisture-result');
                            
                            if (currentMoisture && targetMoisture && waterAdjustment && adjustedWcRatio && moistureResult) {
                                const currentMoistureValue = parseFloat(currentMoisture.value);
                                const targetMoistureValue = parseFloat(targetMoisture.value);
                                
                                // 计算需要增加的水量 (假设骨料用量为850kg/m³)
                                const aggregateWeight = 850;
                                const waterAdjustmentValue = (targetMoistureValue - currentMoistureValue) / 100 * aggregateWeight;
                                
                                // 计算修正后的水灰比 (假设水泥用量为320kg/m³)
                                const cementWeight = 320;
                                const originalWater = 160;
                                const adjustedWater = originalWater + waterAdjustmentValue;
                                const adjustedWCRatio = adjustedWater / cementWeight;
                                
                                waterAdjustment.textContent = waterAdjustmentValue.toFixed(1);
                                adjustedWcRatio.textContent = adjustedWCRatio.toFixed(2);
                                moistureResult.style.display = 'block';
                                
                                showToast('含水率修正计算完成！');
                            } else {
                                console.error('找不到预湿调控技术计算相关元素');
                            }
                        });
                        console.log('预湿调控技术计算按钮事件绑定成功');
                    } else {
                        console.error('找不到calculate-moisture-btn按钮');
                    }
                    
                    // 含泥量检测
                    const checkClayBtn = document.getElementById('check-clay-btn');
                    if (checkClayBtn) {
                        checkClayBtn.addEventListener('click', function() {
                            console.log('含泥量检测按钮被点击');
                            const clayContent = document.getElementById('clay-content');
                            const currentClay = document.getElementById('current-clay');
                            const clayLimit = document.getElementById('clay-limit');
                            const clayStatus = document.getElementById('clay-status');
                            const clayResult = document.getElementById('clay-result');
                            
                            if (clayContent && currentClay && clayLimit && clayStatus && clayResult) {
                                const clayContentValue = parseFloat(clayContent.value);
                                const clayLimitValue = 3.0;
                                
                                currentClay.textContent = clayContentValue.toFixed(1);
                                clayLimit.textContent = clayLimitValue.toFixed(1);
                                
                                let status, alertClass;
                                if (clayContentValue > clayLimitValue) {
                                    status = '超标警告';
                                    alertClass = 'alert-danger';
                                    document.querySelector('#clay-result .alert').className = 'alert ' + alertClass;
                                } else {
                                    status = '正常';
                                    alertClass = 'alert-success';
                                    document.querySelector('#clay-result .alert').className = 'alert ' + alertClass;
                                }
                                
                                clayStatus.textContent = status;
                                clayResult.style.display = 'block';
                                
                                if (clayContentValue > clayLimitValue) {
                                    showToast('含泥量超标，请及时处理！', 'error');
                                } else {
                                    showToast('含泥量检测正常！');
                                }
                            } else {
                                console.error('找不到含泥量检测相关元素');
                            }
                        });
                        console.log('含泥量检测按钮事件绑定成功');
                    } else {
                        console.error('找不到check-clay-btn按钮');
                    }
                    
                    
                    // C30再生混凝土配合比设计试验检测报告下载功能
                    const downloadC30Btn = document.getElementById('download-c30-report-btn');
                    if (downloadC30Btn) {
                        downloadC30Btn.addEventListener('click', function() {
                            try {
                                // 显示下载状态提示
                                showToast('正在处理下载...', 'info');
                                
                                // 创建C30再生混凝土配合比设计试验检测报告的HTML内容
                                const wordContent = `
                                <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                                <head>
                                    <meta charset='utf-8'>
                                    <title>C30再生混凝土配合比设计试验检测报告</title>
                                </head>
                                <body>
                                    <h1 style='text-align: center; color: #2c3e50; font-size: 24px; margin-bottom: 30px;'>C30再生混凝土配合比设计试验检测报告</h1>
                                    
                                    <!-- 报告基本信息表格 -->
                                    <table style='width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 14px;'>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; width: 20%; background-color: #f0f0f0; font-weight: bold;'>委托单位</td>
                                            <td style='border: 1px solid #000; padding: 8px; width: 30%;'>xx 建设集团</td>
                                            <td style='border: 1px solid #000; padding: 8px; width: 20%; background-color: #f0f0f0; font-weight: bold;'>报告编号</td>
                                            <td style='border: 1px solid #000; padding: 8px; width: 30%;'>2024-HP-21</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>工程名称</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>xx 项目</td>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>检测编号</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>2024-HP-21-2</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>工程部位</td>
                                            <td style='border: 1px solid #000; padding: 8px;'></td>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>抗渗等级</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>/</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>强度等级</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>C30</td>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>砼种类</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>再生混凝土</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>检测依据</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>T/CECS 1293-2023</td>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>送样日期</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>2024/4/21</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>环境条件</td>
                                            <td style='border: 1px solid #000; padding: 8px;'></td>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>检测日期</td>
                                            <td style='border: 1px solid #000; padding: 8px;'>2024/5/10</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>试验室地址</td>
                                            <td colspan='3' style='border: 1px solid #000; padding: 8px;'>XX 区 xx 街 XX 号</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 8px; background-color: #f0f0f0; font-weight: bold;'>邮政编码</td>
                                            <td colspan='3' style='border: 1px solid #000; padding: 8px;'>XXXX</td>
                                        </tr>
                                    </table>
                                    
                                    <!-- 再生混凝土配合比表格 -->
                                    <h2 style='color: #2c3e50; font-size: 18px; margin: 20px 0 15px 0; text-align: center;'>再生混凝土配合比</h2>
                                    <table style='width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 14px;'>
                                        <tr style='background-color: #f0f0f0;'>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>项目</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>水泥</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>砂</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>水</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>再生粗骨料用量</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>天然粗骨料用量</th>
                                            <th style='border: 1px solid #000; padding: 10px; text-align: center; font-weight: bold;'>外加剂用量</th>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>每立方米材料用量(kg)</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>131</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>822</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>164</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>617</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>617</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>1.31</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>重量配合比</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>1</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>1.5</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>0.37</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>骨料取代率</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'>50%</td>
                                            <td style='border: 1px solid #000; padding: 10px; text-align: center;'></td>
                                        </tr>
                                    </table>
                                    
                                    <!-- 其他性能参数表格 -->
                                    <table style='width: 100%; border-collapse: collapse; margin-bottom: 30px; font-size: 14px;'>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold; width: 25%;'>水胶比</td>
                                            <td style='border: 1px solid #000; padding: 10px; width: 25%;'>1.255</td>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold; width: 25%;'>养护方法</td>
                                            <td style='border: 1px solid #000; padding: 10px; width: 25%;'>标样</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>坍落度(mm)</td>
                                            <td style='border: 1px solid #000; padding: 10px;'>60</td>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>砂率(%)</td>
                                            <td style='border: 1px solid #000; padding: 10px;'>40</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>7天强度(Mpa)</td>
                                            <td style='border: 1px solid #000; padding: 10px;'>25.9</td>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>28天强度(Mpa)</td>
                                            <td style='border: 1px solid #000; padding: 10px;'>39.4</td>
                                        </tr>
                                        <tr>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'>抗渗、抗冻等级</td>
                                            <td style='border: 1px solid #000; padding: 10px;'>/</td>
                                            <td style='border: 1px solid #000; padding: 10px; background-color: #f0f0f0; font-weight: bold;'></td>
                                            <td style='border: 1px solid #000; padding: 10px;'></td>
                                        </tr>
                                    </table>
                                </body>
                                </html>
                                `;
                                
                                // 将HTML内容转换为Blob，使用Word文档格式
                                const blob = new Blob([wordContent], { 
                                    type: 'application/msword' 
                                });
                                
                                // 创建下载链接
                                const url = window.URL.createObjectURL(blob);
                                const link = document.createElement('a');
                                link.href = url;
                                link.download = 'C30再生混凝土配合比设计试验检测报告.doc';
                                
                                // 触发下载
                                document.body.appendChild(link);
                                link.click();
                                
                                // 清理资源
                                document.body.removeChild(link);
                                window.URL.revokeObjectURL(url);
                                
                                // 显示成功状态
                                showToast('✅ C30再生混凝土配合比设计试验检测报告下载成功！', 'success');
                                
                            } catch (error) {
                                console.error('下载失败:', error);
                                showToast('❌ 下载失败：' + error.message + '。请重试。', 'error');
                            }
                        });
                        console.log('C30报告下载按钮事件绑定成功');
                    } else {
                        console.error('找不到download-c30-report-btn按钮');
                    }
                    
                    console.log('所有事件监听器绑定完成');
                }, 500); // 延迟500ms确保DOM完全加载

                // 登录功能
                document.getElementById('login-form').addEventListener('submit', function(e) {
                    e.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if(username && password) {
                    document.getElementById('login-page').style.display = 'none';
                    document.getElementById('main-system').style.display = 'flex';
                    document.getElementById('current-user').textContent = username;
                    
                    // 初始化数据
                    console.log('登录成功，开始渲染数据...');
                    renderMaterialsTable();
                    renderRatioTable();
                    renderMaterialLibraryTable();
                    updateDashboard();
                    
                                        // 确保素材库表单默认隐藏
                    document.getElementById('material-library-form-container').style.setProperty('display', 'none', 'important');
                    
                    
                    
                    // 确保素材库表单默认隐藏
                    document.getElementById('material-library-form-container').style.setProperty('display', 'none', 'important');
                    
                    // 确保默认页面显示退出模块
                    const header = document.querySelector('.header');
                    if (header) {
                        header.style.display = 'flex';
                    }
                    
                    // 初始化强度发展曲线图表
                    setTimeout(() => {
                        if (document.getElementById('strength-chart')) {
                            initStrengthChart();
                        }
                    }, 500);
                } else {
                    showToast('请输入用户名和密码', 'error');
                }
            });
            

            
            // 页面切换功能
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.page-container').forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    const targetPage = this.getAttribute('data-page');
                    document.getElementById(targetPage).classList.add('active');
                    
                    // 隐藏所有计算过程区域
                    hideAllCalculationProcesses();
                    
                    // 页面标题已删除，不再需要更新页面标题
                    
                    // 如果切换到实验验证页面，初始化图表
                    if (targetPage === 'experiment') {
                        setTimeout(() => {
                            if (document.getElementById('strength-chart') && !strengthChart) {
                                initStrengthChart();
                            }
                        }, 100);
                    }
                    
                    // 如果切换到多目标协同优化页面，初始化图表
                    if (targetPage === 'performance') {
                        setTimeout(() => {
                            if (document.getElementById('carbon-chart') && !carbonChart) {
                                initCarbonChart();
                            }
                            if (document.getElementById('cost-chart') && !costChart) {
                                initCostChart();
                            }
                            if (document.getElementById('slump-chart') && !slumpChart) {
                                initSlumpChart();
                            }
                            if (document.getElementById('strength-prediction-chart') && !strengthPredictionChart) {
                                initStrengthPredictionChart();
                            }
                        }, 100);
                    }
                    
                    // 如果切换到素材库页面，重新渲染表格
                    if (targetPage === 'materials-library') {
                        // 重新渲染素材库表格
                        console.log('切换到素材库页面，重新渲染表格...');
                        renderMaterialLibraryTable();
                        
                        // 强制应用样式修复
                        setTimeout(() => {
                            const page = document.getElementById(targetPage);
                            if (page) {
                                page.style.width = '100%';
                                page.style.maxWidth = '100%';
                                page.style.margin = '0';
                                page.style.padding = '0';
                                page.style.left = '0';
                                page.style.right = '0';
                            }
                        }, 100);
                    }
                    
                    // 如果切换到数据库页面，强制应用样式修复
                    if (targetPage === 'database') {
                        setTimeout(() => {
                            const page = document.getElementById(targetPage);
                            if (page) {
                                page.style.width = '100%';
                                page.style.maxWidth = '100%';
                                page.style.margin = '0';
                                page.style.padding = '0';
                                page.style.left = '0';
                                page.style.right = '0';
                            }
                        }, 100);
                    }
                });
            });
            

            
            // 原材料表单提交
            document.getElementById('material-form').addEventListener('submit', saveMaterial);
            
            // 取消添加原材料
            document.getElementById('material-cancel-btn').addEventListener('click', function() {
                // 清空表单，但保持表单显示
                document.getElementById('material-form').reset();
                document.getElementById('edit-material-id').value = '';
            });
            
            // 快捷功能入口
            document.querySelectorAll('.quick-item').forEach(item => {
                item.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                    document.querySelector(`.menu-item[data-page="${targetPage}"]`).classList.add('active');
                    
                    document.querySelectorAll('.page-container').forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    document.getElementById(targetPage).classList.add('active');
                    
                    // 隐藏所有计算过程区域
                    hideAllCalculationProcesses();
                    
                    // 页面标题已删除，不再需要更新页面标题
                    

                    

                    

                });
            });
            
                    // 配合比计算按钮
        document.getElementById('calculate-btn').addEventListener('click', function() {
            console.log('计算配合比按钮被点击');
            calculateConcreteRatio();
        });
        
        // 再生混凝土配合比计算按钮
        document.getElementById('recycled-calculate-btn').addEventListener('click', function() {
            console.log('再生混凝土计算配合比按钮被点击');
            calculateRecycledConcreteRatio();
        });
        
        // 3D打印砂浆配合比计算按钮
        document.getElementById('3d-calculate-btn').addEventListener('click', function() {
            console.log('3D打印砂浆计算配合比按钮被点击');
            calculate3DPrintingMortarRatio();
        });
            
            // 配合比表单提交
            document.getElementById('ratio-form').addEventListener('submit', function(e) {
                console.log('保存配合比表单被提交');
                saveRatio(e);
            });
            
            // 事件绑定已移到DOMContentLoaded事件内部，延迟500ms执行
            
            // 更新强度发展曲线
            document.getElementById('update-strength-chart-btn').addEventListener('click', function() {
                updateStrengthData();
                showToast('强度发展曲线已更新！');
            });
            
            // 配合比计算页面标签切换功能
            function initMixRatioTabs() {
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');
                
                tabButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const targetTab = this.getAttribute('data-tab');
                        console.log('点击标签:', targetTab); // 调试信息
                        
                        // 移除所有活动状态
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabContents.forEach(content => content.classList.remove('active'));
                        
                        // 添加当前活动状态
                        this.classList.add('active');
                        const targetContent = document.getElementById(targetTab + '-content');
                        if (targetContent) {
                            targetContent.classList.add('active');
                            console.log('切换到内容:', targetTab + '-content'); // 调试信息
                            
                            // 在标签页切换时隐藏所有计算过程区域
                            hideAllCalculationProcesses();
                        } else {
                            console.error('找不到目标内容:', targetTab + '-content'); // 调试信息
                        }
                        
                        // 平滑滚动到内容区域
                        const contentArea = document.querySelector('.calculation-content');
                        if (contentArea) {
                            contentArea.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'start' 
                            });
                        }
                    });
                });
            }
            
            // 隐藏所有计算过程区域的函数
            function hideAllCalculationProcesses() {
                const calculationProcesses = [
                    'calculation-process',
                    'recycled-calculation-process', 
                    '3d-calculation-process'
                ];
                
                calculationProcesses.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.style.display = 'none';
                    }
                });
            }
            
            // 在页面切换时初始化标签功能
            document.addEventListener('DOMContentLoaded', function() {
                // 延迟初始化，确保DOM完全加载
                setTimeout(initMixRatioTabs, 100);
                
                // 确保所有计算过程区域初始状态为隐藏
                hideAllCalculationProcesses();
            });
            

            
            // 视频悬停效果
            document.querySelectorAll('.video-container').forEach(container => {
                const video = container.querySelector('video');
                const overlay = container.querySelector('.video-overlay');
                
                if (video && overlay) {
                    container.addEventListener('mouseenter', function() {
                        overlay.style.opacity = '1';
                    });
                    
                    container.addEventListener('mouseleave', function() {
                        overlay.style.opacity = '0';
                    });
                    
                    overlay.addEventListener('click', function() {
                        video.play().catch(e => console.log('视频播放失败:', e));
                    });
                }
            });
            
            // 多目标协同优化模块按钮事件
            // 更新碳排放测算
            document.getElementById('update-carbon-btn').addEventListener('click', function() {
                if (carbonChart) {
                    // 模拟数据更新
                    const newData = [
                        350 + Math.random() * 20,
                        287 + Math.random() * 15,
                        245 + Math.random() * 10
                    ];
                    carbonChart.data.datasets[0].data = newData;
                    carbonChart.update('active');
                    showToast('碳排放测算已更新！');
                }
            });
            
            // 更新经济性看板
            document.getElementById('update-cost-btn').addEventListener('click', function() {
                if (costChart) {
                    // 模拟数据更新
                    const newData = [320, 310, 295, 272, 250, 235].map(cost => 
                        cost + (Math.random() - 0.5) * 10
                    );
                    costChart.data.datasets[0].data = newData;
                    costChart.update('active');
                    showToast('经济性分析已更新！');
                }
            });
            
            // 3D打印砂浆配合比计算主函数
            function calculate3DPrintingMortarRatio() {
                // 获取输入参数
                const designStrength = parseFloat(document.getElementById('3d-design-strength').value);
                const strengthReduction = parseFloat(document.getElementById('3d-strength-reduction').value);
                const standardDeviation = parseFloat(document.getElementById('3d-standard-deviation').value);
                const nozzleDiameter = parseFloat(document.getElementById('3d-nozzle-diameter').value);
                const cementStrength = parseFloat(document.getElementById('3d-cement-strength').value);
                const waterBinderRatio = parseFloat(document.getElementById('3d-water-binder-ratio').value);
                const binderContent = parseFloat(document.getElementById('3d-binder-content').value);
                const admixtureContent = parseFloat(document.getElementById('3d-admixture-content').value);
                const sandDensity = parseFloat(document.getElementById('3d-sand-density').value);
                const cementDensity = parseFloat(document.getElementById('3d-cement-density').value);
                const flyAshContent = parseFloat(document.getElementById('3d-fly-ash-content').value);
                
                // 输入验证
                if (!designStrength || !strengthReduction || !cementStrength) {
                    showToast('请填写必填参数：设计强度等级、打印强度折减率、水泥实测强度', 'error');
                    return;
                }
                
                // 1. 确定配制强度 fcu,0 (MPa)
                const adjustedStrength = designStrength / (1 - strengthReduction / 100);
                document.getElementById('3d-adjusted-strength').textContent = adjustedStrength.toFixed(1);
                
                const designStrengthResult = adjustedStrength + 1.645 * standardDeviation;
                document.getElementById('3d-design-strength-result').textContent = designStrengthResult.toFixed(1);
                
                // 2. 水胶比 (W/B)
                document.getElementById('3d-water-binder-ratio-result').textContent = waterBinderRatio.toFixed(2);
                
                // 3. 胶凝材料用量 (kg/m³)
                document.getElementById('3d-binder-content-result').textContent = binderContent;
                
                // 4. 用水量 (kg/m³)
                const waterContent = binderContent * waterBinderRatio;
                document.getElementById('3d-water-content-result').textContent = waterContent.toFixed(0);
                
                // 5. 骨料用量计算 (kg/m³)
                const aggregateVolume = 1 - (binderContent/cementDensity + waterContent/1000);
                document.getElementById('3d-aggregate-volume').textContent = aggregateVolume.toFixed(2);
                
                const sandContent = aggregateVolume * sandDensity;
                document.getElementById('3d-sand-content').textContent = sandContent.toFixed(0);
                
                // 6. 外加剂用量 (kg/m³)
                const admixtureContentResult = binderContent * admixtureContent / 100;
                document.getElementById('3d-admixture-content-result').textContent = admixtureContentResult.toFixed(1);
                
                // 7. 配合比比例
                const cementContent = binderContent * (1 - flyAshContent / 100);
                const ratioProportion = `1:${(flyAshContent/100).toFixed(2)}:${(sandContent/cementContent).toFixed(2)}:${(waterContent/cementContent).toFixed(2)}:${(admixtureContentResult/cementContent).toFixed(3)}`;
                document.getElementById('3d-ratio-proportion').textContent = ratioProportion;
                
                // 更新最终结果
                document.getElementById('3d-final-cement').textContent = cementContent.toFixed(0) + ' kg/m³';
                document.getElementById('3d-final-fly-ash').textContent = (binderContent * flyAshContent / 100).toFixed(0) + ' kg/m³';
                document.getElementById('3d-final-sand').textContent = sandContent.toFixed(0) + ' kg/m³';
                document.getElementById('3d-final-water').textContent = waterContent.toFixed(0) + ' kg/m³';
                document.getElementById('3d-final-admixture').textContent = admixtureContentResult.toFixed(1) + ' kg/m³';
                document.getElementById('3d-final-wc-ratio').textContent = waterBinderRatio.toFixed(2);
                
                // 显示计算过程
                document.getElementById('3d-calculation-process').style.display = 'block';
                
                // 滚动到结果区域
                document.getElementById('3d-calculation-process').scrollIntoView({ behavior: 'smooth' });
                
                showToast('3D打印砂浆配合比计算完成！', 'success');
            }
        });
    </script>

</body></html>